[{"attributes":{"type":"skuid__Page__c","url":"/services/data/v42.0/sobjects/skuid__Page__c/a8n3Y000000GmtGQAS"},"Id":"a8n3Y000000GmtGQAS","Name":"CustomerSearch","skuid__API_Version__c":"v1","skuid__Type__c":"Desktop","skuid__UniqueId__c":"_CustomerSearch","skuid__Module__c":null,"skuid__Composer_Settings__c":"{\"skuid.model(/kyc/v1/getCompanyByRegNumber?companyNumber={{sk-3vaV-942}})\":{\"sk-3vaV-942\":null},\"skuid.model(Datasourcelogin)\":{\"company_number\":\"07710776\",\"Company_number\":null},\"skuid.model(SearchByCustomerName)\":{\"company_name\":\"Simply\"},\"skuid.model(OfficersDetails)\":{\"CompanyNumber\":null,\"company_Number\":\"03713113\"},\"skuid.model(ShareholderDetails)\":{\"company_Number\":\"03713113\"},\"skuid.model(Relationship)\":{\"kycParty1Id\":\"4\",\"kycParty1RegNumber\":\"10588244\"}}","skuid__MasterPage__c":null,"skuid__MasterPage__r":null,"skuid__IsMaster__c":false,"skuid__Layout__c":"<skuidpage unsavedchangeswarning=\"yes\" personalizationmode=\"server\" useviewportmeta=\"true\" showsidebar=\"true\" showheader=\"true\"><models><model id=\"Customer\" query=\"true\" createrowifnonefound=\"false\" datasource=\"salesforce\" sobject=\"Account\" limit=\"10\"><fields><field id=\"RecordTypeId\"/><field id=\"Name\"/><field id=\"Type\"/><field id=\"clcommon__Email__c\"/><field id=\"Sic\"/><field id=\"AccountNumber\"/><field id=\"BillingCity\"/><field id=\"BillingStreet\"/><field id=\"BillingState\"/><field id=\"BillingPostalCode\"/><field id=\"SAF_latestAccountsDate__c\"/><field id=\"SAF_filingType__c\"/><field id=\"KYCDB_Unique_Key_Account__c\"/><field id=\"Id\"/></fields><conditions/><actions><action><actions><action type=\"save\" rollbackonanyerror=\"true\" model=\"Customer\" appendorprepend=\"prepend\" defaultmodefornewitems=\"edit\" affectedrows=\"all\"><models><model>Customer</model></models></action></actions><events><event>row.created</event></events></action></actions></model><model id=\"Datasourcelogin\" limit=\"20\" query=\"false\" createrowifnonefound=\"false\" datasource=\"SimplyKYC\" processonclient=\"true\" type=\"readwrite\" async=\"false\"><fields><field id=\"company_number\" displaytype=\"TEXT\"/><field id=\"company_name\" displaytype=\"TEXT\"/><field id=\"availableInDB\"/><field id=\"id\"/><field id=\"type\" displaytype=\"TEXT\"/><field id=\"registered_office_address.postal_code\" displaytype=\"TEXT\"/><field id=\"links.officers\"/><field id=\"company_status\"/><field id=\"registered_office_address.address_line_1\" displaytype=\"TEXT\"/><field id=\"registered_office_address.country\" displaytype=\"TEXT\"/><field id=\"registered_office_address.address_line_2\" displaytype=\"TEXT\"/><field id=\"registered_office_address.locality\" displaytype=\"TEXT\"/><field id=\"accounts.last_accounts.made_up_to\" label=\"Made Up To\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DATE\" accessible=\"true\" filterable=\"true\"/><field id=\"accounts.last_accounts.type\" label=\"Type\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"cls_account_id\" label=\"Cls Account Id\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"TEXT\" accessible=\"true\" filterable=\"true\" ogdisplaytype=\"STRING\" datasource=\"salesforce\"><batchfields/></field><field id=\"registered_address_line1\" label=\"Registered Address Line1\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"registered_city\" label=\"Registered City\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"registered_country\" label=\"Registered Country\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"registered_county\" label=\"Registered County\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"registered_postcode\" label=\"Registered Postcode\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"sic_code\" label=\"Sic Code\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"sic_codes1\" label=\"Sic Codes1\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DOUBLE\" precision=\"5\" scale=\"0\" accessible=\"true\" filterable=\"true\"/><field id=\"sic_codes2\" label=\"Sic Codes2\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"trading_address_line1\" label=\"Trading Address Line1\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"trading_city\" label=\"Trading City\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"trading_country\" label=\"Trading Country\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"trading_county\" label=\"Trading County\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"trading_postcode\" label=\"Trading Postcode\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"zoho_account_id\" label=\"Zoho Account Id\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"accounts.last_accounts.period_end_on\" label=\"Period End On\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DATE\" accessible=\"true\" filterable=\"true\"/></fields><conditions><condition type=\"modelmerge\" value=\"\" sourcetype=\"param\" sourceparam=\"company_number\" operator=\"=\" model=\"Newcustomer\" enclosevalueinquotes=\"true\" mergefield=\"CustomerRegNumber\" novaluebehavior=\"deactivate\" state=\"filterableon\" inactive=\"false\" name=\"company_number\"/></conditions><actions/><methods><method type=\"query\" verb=\"GET\" endpoint=\"kyc/v1/getCompanyByRegNumber?companyNumber={{company_number}}\" payloadcontenttype=\"JSON\"/></methods></model><model id=\"Newcustomer\" limit=\"20\" query=\"true\" createrowifnonefound=\"true\" datasource=\"Ui-Only\" processonclient=\"true\"><fields><field id=\"CustomerRegNumber\" displaytype=\"TEXT\" label=\"Customer Registration Number\" defaultvaluetype=\"fieldvalue\" mergefield=\"Id\" length=\"255\" ogdisplaytype=\"TEXT\" picklistsource=\"manual\" returntype=\"TEXT\" datasource=\"salesforce\" defaultValue=\"\" userinfotype=\"userid\" enclosevalueinquotes=\"true\"><batchfields/></field><field id=\"CustomerName\" displaytype=\"TEXT\" label=\"Customer Name\" length=\"255\"/><field id=\"KycDBId\" displaytype=\"TEXT\" length=\"255\" ogdisplaytype=\"TEXT\" readonly=\"false\" returntype=\"TEXT\" label=\"KycDBId\" defaultvaluetype=\"fieldvalue\"><formula>VALUE(MODEL_LOOKUP(Customer,KYCDB_Unique_Key_Account__c,AccountNumber,{{CustomerRegNumber}}))\n\n\n\n</formula></field></fields><conditions/><actions/></model><model id=\"SearchByCustomerName\" query=\"false\" createrowifnonefound=\"false\" datasource=\"SimplyKYC\" processonclient=\"true\" payloadcontenttype=\"JSON\" type=\"readwrite\" unloadwarningifunsavedchanges=\"false\"><fields><field id=\"company_name\" label=\"Company Name\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"company_number\" label=\"Company Number\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"TEXT\" precision=\"8\" scale=\"0\" accessible=\"true\" filterable=\"true\" ogdisplaytype=\"DOUBLE\"/><field id=\"company_search_type\" label=\"Company Search Type\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"company_status\" label=\"Company Status\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"company_type\" label=\"Company Type\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"sic_codes1\" label=\"Sic Codes1\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"sic_codes2\" label=\"Sic Codes2\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"source_data_system\" label=\"Source Data System\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"last_accounts_type\" label=\"Last Accounts Type\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"last_accounts_made_up_to\" label=\"Last Accounts Made Up To\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DATE\" accessible=\"true\" filterable=\"true\"/><field id=\"last_accounts_period_end_on\" label=\"Last Accounts Period End On\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DATE\" accessible=\"true\" filterable=\"true\"/><field id=\"cls_account_id\" label=\"Cls Account Id\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"id\" label=\"Id\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DOUBLE\" precision=\"2\" scale=\"0\" accessible=\"true\" filterable=\"true\"/><field id=\"registered_address_line1\" label=\"Registered Address Line1\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"registered_city\" label=\"Registered City\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"registered_country\" label=\"Registered Country\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"registered_county\" label=\"Registered County\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"registered_postcode\" label=\"Registered Postcode\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/></fields><conditions><condition type=\"modelmerge\" value=\"\" sourcetype=\"param\" sourceparam=\"company_name\" operator=\"=\" model=\"Newcustomer\" enclosevalueinquotes=\"true\" mergefield=\"CustomerRegNumber\" novaluebehavior=\"deactivate\"/></conditions><actions/><methods><method type=\"query\" verb=\"GET\" payloadcontenttype=\"JSON\" endpoint=\"kyc/v2/searchByCompanyNameOrPostalcode?companyName={{company_name}}&amp;limit=100&amp;offset=0\"/></methods></model><model id=\"updateCLSID\" limit=\"20\" query=\"false\" createrowifnonefound=\"false\" datasource=\"SimplyKYC\" processonclient=\"true\" type=\"readwrite\"><fields/><conditions/><actions/><methods><method type=\"update\" verb=\"POST\" endpoint=\"kyc/v1/updateClsAccount\" successif=\"requestsucceeds\" sendchanges=\"custompayloadinbody\" payloadsnippet=\"test\" insertresponse=\"recordinbody\" contenttype=\"application/json\"/></methods></model><model id=\"OfficersDetails\" query=\"false\" createrowifnonefound=\"false\" datasource=\"SimplyKYC\" processonclient=\"true\" payloadcontenttype=\"JSON\" type=\"readwrite\" unloadwarningifunsavedchanges=\"false\"><fields><field id=\"links.self\" label=\"Self\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"items.address.address_line_1\" label=\"Address Line 1\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"items.address.country\" label=\"Country\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"items.address.address_line_2\" label=\"Address Line 2\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"items.address.locality\" label=\"Locality\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"items.address.postal_code\" label=\"Postal Code\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"items.address.premises\" label=\"Premises\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"items.address.region\" label=\"Region\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"items.name\" label=\"Name\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"items.nationality\" label=\"Nationality\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"items.officer_role\" label=\"Officer Role\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"items.source_data_system\" label=\"Source Data System\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"items.date_of_birth.month\" label=\"Month\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DOUBLE\" precision=\"2\" scale=\"0\" accessible=\"true\" filterable=\"true\"/><field id=\"items.date_of_birth.year\" label=\"Year\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DOUBLE\" precision=\"4\" scale=\"0\" accessible=\"true\" filterable=\"true\"/><field id=\"items.links.self\" label=\"Self\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"items.links.officer.appointments\" label=\"Appointments\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"company_Number\" label=\"Company Number\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/></fields><conditions><condition type=\"modelmerge\" value=\"\" sourcetype=\"param\" sourceparam=\"company_Number\" operator=\"=\" model=\"Newcustomer\" enclosevalueinquotes=\"true\" mergefield=\"CustomerRegNumber\" novaluebehavior=\"deactivate\" state=\"filterableon\" inactive=\"false\" name=\"company_Number\"/></conditions><actions/><methods><method type=\"query\" verb=\"GET\" payloadcontenttype=\"JSON\" endpoint=\"kyc/v1/getOfficersByCRN?companyNumber={{company_Number}}\"/></methods></model><model id=\"ShareholderDetails\" query=\"false\" createrowifnonefound=\"false\" datasource=\"SimplyKYC\" payloadcontenttype=\"JSON\" type=\"readwrite\" unloadwarningifunsavedchanges=\"false\"><fields><field id=\"company_Number\" label=\"Company Number\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"TEXT\" precision=\"8\" scale=\"0\" accessible=\"true\" filterable=\"true\" ogdisplaytype=\"DOUBLE\"/><field id=\"data.name\" label=\"Name\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"data.nationality\" label=\"Nationality\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"data.natures_of_control.25\" label=\"25\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"data.natures_of_control.26\" label=\"26\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DOUBLE\" precision=\"1\" scale=\"0\" accessible=\"true\" filterable=\"true\"/><field id=\"data.notified_on\" label=\"Notified On\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DATE\" accessible=\"true\" filterable=\"true\"/><field id=\"data.date_of_birth.month\" label=\"Month\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DOUBLE\" precision=\"1\" scale=\"0\" accessible=\"true\" filterable=\"true\"/><field id=\"data.date_of_birth.year\" label=\"Year\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DOUBLE\" precision=\"4\" scale=\"0\" accessible=\"true\" filterable=\"true\"/><field id=\"data.id\" displaytype=\"TEXT\" label=\"Kyc id\"/></fields><conditions><condition type=\"modelmerge\" value=\"\" sourcetype=\"param\" sourceparam=\"company_Number\" operator=\"=\" model=\"Newcustomer\" enclosevalueinquotes=\"true\" mergefield=\"CustomerRegNumber\" novaluebehavior=\"deactivate\" state=\"filterableon\" inactive=\"false\" name=\"company_Number\"/></conditions><actions/><methods><method type=\"query\" verb=\"GET\" payloadcontenttype=\"JSON\" endpoint=\"kyc/v1/getCompanyShareholders?companyNumber={{company_Number}}\"/></methods></model><model id=\"Contact\" query=\"false\" createrowifnonefound=\"false\" datasource=\"salesforce\" limit=\"20\" sobject=\"Contact\" unloadwarningifunsavedchanges=\"false\"><fields><field id=\"RecordTypeId\"/><field id=\"Birthdate\"/><field id=\"AccountId\"/><field id=\"Account.Name\"/><field id=\"SAF_DOB_Month__c\"/><field id=\"SAF_DOB_Year__c\"/><field id=\"FirstName\"/><field id=\"Name\"/><field id=\"LastName\"/><field id=\"MiddleName\"/><field id=\"SAF_OfficerId__c\"/><field id=\"SAF_OfficialRole__c\"/><field id=\"MailingAddress\"/><field id=\"MailingCity\"/><field id=\"MailingCountry\"/><field id=\"MailingState\"/><field id=\"MailingStreet\"/><field id=\"MailingPostalCode\"/><field id=\"SAF_Position__c\"/><field id=\"Title\"/><field id=\"SAF_TotalShareholding__c\"/><field id=\"KYCDB_Unique_Key_Contact__c\"/></fields><conditions/><actions/></model><model id=\"TestModel\" query=\"false\" createrowifnonefound=\"false\" datasource=\"SimplyKYC\" processonclient=\"true\" verb=\"GET\" payloadcontenttype=\"JSON\"><fields/><conditions/><actions/><methods/></model><model id=\"Relationship\" query=\"false\" createrowifnonefound=\"false\" datasource=\"SimplyKYC\" payloadcontenttype=\"JSON\" type=\"readwrite\"><fields><field id=\"clsRelationshipId\" label=\"Cls Relationship Id\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"individualValue\" label=\"Individual Value\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"jointShareholding\" label=\"Joint Shareholding\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"jointValue\" label=\"Joint Value\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"kycParty1Id\" label=\"Kyc Party1 Id\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DOUBLE\" precision=\"2\" scale=\"0\" accessible=\"true\" filterable=\"true\"/><field id=\"kycParty1RegNumber\" label=\"Kyc Party1 Reg Number\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DOUBLE\" precision=\"8\" scale=\"0\" accessible=\"true\" filterable=\"true\"/><field id=\"kycParty2Id\" label=\"Kyc Party2 Id\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DOUBLE\" precision=\"2\" scale=\"0\" accessible=\"true\" filterable=\"true\"/><field id=\"kycParty2RegNumber\" label=\"Kyc Party2 Reg Number\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"kycRelationshipId\" label=\"Kyc Relationship Id\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DOUBLE\" precision=\"2\" scale=\"0\" accessible=\"true\" filterable=\"true\"/><field id=\"noOfShares\" label=\"No Of Shares\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"nominalValue\" label=\"Nominal Value\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"officerRole\" label=\"Officer Role\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"shareClass\" label=\"Share Class\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"shareholderBracket\" label=\"Shareholder Bracket\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"shareholderPerc\" label=\"Shareholder Perc\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"shareholderType\" label=\"Shareholder Type\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"sourceDataSystem\" label=\"Source Data System\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"totalValue\" label=\"Total Value\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"zohoRelationshipId\" label=\"Zoho Relationship Id\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/></fields><conditions><condition type=\"modelmerge\" value=\"\" sourcetype=\"param\" sourceparam=\"kycParty1Id\" operator=\"=\" mergefield=\"KycDBId\" novaluebehavior=\"deactivate\" model=\"Newcustomer\" enclosevalueinquotes=\"true\"/><condition type=\"modelmerge\" value=\"\" sourcetype=\"param\" sourceparam=\"kycParty1RegNumber\" operator=\"=\" mergefield=\"CustomerRegNumber\" novaluebehavior=\"deactivate\" model=\"Newcustomer\" enclosevalueinquotes=\"true\"/></conditions><actions/><methods><method type=\"query\" verb=\"GET\" payloadcontenttype=\"JSON\" endpoint=\"kyc/v1/system/integration/relationship?kycNumber={{kycParty1Id}}&amp;companyNumber={{kycParty1RegNumber}}\"/></methods></model><model id=\"RelationshipforName\" query=\"false\" createrowifnonefound=\"false\" datasource=\"SimplyKYC\" payloadcontenttype=\"JSON\" type=\"readwrite\"><fields><field id=\"clsRelationshipId\" label=\"Cls Relationship Id\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"individualValue\" label=\"Individual Value\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"jointShareholding\" label=\"Joint Shareholding\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"jointValue\" label=\"Joint Value\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"kycParty1Id\" label=\"Kyc Party1 Id\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DOUBLE\" precision=\"2\" scale=\"0\" accessible=\"true\" filterable=\"true\"/><field id=\"kycParty1RegNumber\" label=\"Kyc Party1 Reg Number\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DOUBLE\" precision=\"8\" scale=\"0\" accessible=\"true\" filterable=\"true\"/><field id=\"kycParty2Id\" label=\"Kyc Party2 Id\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DOUBLE\" precision=\"2\" scale=\"0\" accessible=\"true\" filterable=\"true\"/><field id=\"kycParty2RegNumber\" label=\"Kyc Party2 Reg Number\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"kycRelationshipId\" label=\"Kyc Relationship Id\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"DOUBLE\" precision=\"2\" scale=\"0\" accessible=\"true\" filterable=\"true\"/><field id=\"noOfShares\" label=\"No Of Shares\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"nominalValue\" label=\"Nominal Value\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"officerRole\" label=\"Officer Role\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"shareClass\" label=\"Share Class\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"shareholderBracket\" label=\"Shareholder Bracket\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"shareholderPerc\" label=\"Shareholder Perc\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"shareholderType\" label=\"Shareholder Type\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"sourceDataSystem\" label=\"Source Data System\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"totalValue\" label=\"Total Value\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/><field id=\"zohoRelationshipId\" label=\"Zoho Relationship Id\" ispolymorphic=\"false\" isnamepointing=\"false\" displaytype=\"STRING\" accessible=\"true\" filterable=\"true\"/></fields><conditions><condition type=\"modelmerge\" value=\"\" sourcetype=\"param\" sourceparam=\"kycParty1Id\" operator=\"=\" mergefield=\"KycDBId\" novaluebehavior=\"deactivate\" model=\"Newcustomer\" enclosevalueinquotes=\"true\" state=\"filterableon\" inactive=\"false\" name=\"kycpartyid_fetch\"/><condition type=\"modelmerge\" value=\"\" sourcetype=\"param\" sourceparam=\"kycParty1RegNumber\" operator=\"=\" mergefield=\"CustomerRegNumber\" novaluebehavior=\"deactivate\" model=\"Newcustomer\" enclosevalueinquotes=\"true\" state=\"filterableon\" inactive=\"false\" name=\"CompRegNum_fetch\"/></conditions><actions/><methods><method type=\"query\" verb=\"GET\" payloadcontenttype=\"JSON\" endpoint=\"kyc/v1/system/integration/relationship?kycNumber={{kycParty1Id}}&amp;companyNumber={{kycParty1RegNumber}}\"/></methods></model></models><components><grid uniqueid=\"sk-4Vg-530\"><divisions><division behavior=\"flex\" minwidth=\"100px\" ratio=\"1\" verticalalign=\"top\"><components><pagetitle uniqueid=\"sk-2JFe-747\" model=\"Newcustomer\"><maintitle>&lt;h2&gt;Customer Search&lt;/h2&gt;</maintitle><actions><action type=\"multi\" label=\"Search Customer\" uniqueid=\"sk-2JFj-801\"><actions><action type=\"requeryModel\" model=\"Datasourcelogin\" behavior=\"standard\"/><action type=\"requeryModel\" model=\"SearchByCustomerName\" behavior=\"standard\"/><action type=\"requeryModel\" model=\"ShareholderDetails\" behavior=\"standard\"/><action type=\"requeryModel\" model=\"OfficersDetails\" behavior=\"standard\"/><action type=\"requeryModel\" model=\"Relationship\" behavior=\"standard\"/></actions></action></actions><renderconditions logictype=\"and\"/></pagetitle><basicfieldeditor showheader=\"true\" showsavecancel=\"false\" showerrorsinline=\"true\" model=\"Newcustomer\" uniqueid=\"sk-3-1n-264\" mode=\"edit\"><columns layoutmode=\"fixed\"><column width=\"50%\" uniqueid=\"sk-3-1n-260\"><sections><section collapsible=\"no\" uniqueid=\"sk-4Va-518\" showheader=\"false\"><fields><field uniqueid=\"sk-4Vc-522\" id=\"CustomerRegNumber\" cssclass=\"enterevent\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions/><label>&lt;h1&gt;Search for Customer&lt;/h1&gt;</label></field></fields><renderconditions logictype=\"and\"/></section></sections></column><column width=\"50%\" uniqueid=\"sk-3-1n-262\"><sections/></column></columns><renderconditions logictype=\"and\"/></basicfieldeditor></components></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/></styles><renderconditions logictype=\"and\"/></grid><skootable showconditions=\"true\" showsavecancel=\"false\" showerrorsinline=\"true\" searchmethod=\"server\" searchbox=\"false\" showexportbuttons=\"false\" hideheader=\"false\" hidefooter=\"false\" pagesize=\"10\" alwaysresetpagination=\"true\" createrecords=\"false\" model=\"SearchByCustomerName\" mode=\"read\" allowcolumnreordering=\"false\" responsive=\"false\" uniqueid=\"sk-jl_-1038\" instantfilters=\"true\" emptysearchbehavior=\"query\"><fields><field id=\"company_name\" hideable=\"true\" uniqueid=\"fi-1XFa-1282\"><label>Company Name</label></field><field id=\"company_number\" hideable=\"true\" uniqueid=\"fi-1XFT-1258\"><label>Company Registration Number</label></field><field id=\"registered_postcode\" hideable=\"true\" uniqueid=\"fi-13Su-1112\"><label>Postal Code</label></field><field id=\"cls_account_id\" hideable=\"true\" uniqueid=\"fi-2ktK-1567\"><label>CL Customer ID</label></field><field id=\"id\" hideable=\"true\" uniqueid=\"fi-ZoR-626\"><label>KYC DB Id</label></field><field type=\"BUTTON\" hideable=\"true\" uniqueid=\"fi-29Ip-1412\"><label>Create Customer</label><text>Create Customer</text><actions><action type=\"blockUI\" timeout=\"1000\" message=\"Creating Customer\"/><action type=\"custom\" snippet=\"test_sic\"><onerroractions/></action></actions><renderconditions logictype=\"or\" onhidedatabehavior=\"keep\" logic=\"1\"/><enableconditions logictype=\"and\" logic=\"1\" message=\"Customer already created\"><condition type=\"blank\" operator=\"=\" fieldmodel=\"SearchByCustomerName\" sourcetype=\"fieldvalue\" field=\"cls_account_id\" fieldtargetobjects=\"SimplyKYC\" value=\"null\" enclosevalueinquotes=\"false\"/></enableconditions></field><field type=\"BUTTON\" hideable=\"true\" uniqueid=\"fi-2JEb-605\"><label>Application</label><text>Create Application</text><actions><action type=\"redirect\" window=\"blank\" url=\"https://saf-saml--saffull--genesisextn.visualforce.com/apex/NewApplication?ent=01I0O000000vYCu&amp;RecordType=0120O000000BRqrQAG&amp;accountid={{cls_account_id}}&amp;retURL=%2Fa7F%2Fo&amp;save_new=1&amp;sfdc.override=1\"/></actions><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions logictype=\"and\"><condition type=\"blank\" operator=\"!=\" fieldmodel=\"SearchByCustomerName\" sourcetype=\"fieldvalue\" field=\"cls_account_id\" fieldtargetobjects=\"SimplyKYC\" value=\"null\" enclosevalueinquotes=\"false\"/></enableconditions></field><field type=\"BUTTON\" hideable=\"true\" uniqueid=\"fi-rX4-1173\"><label>Create Company Structure</label><text>Create Company Structure</text><actions><action type=\"blockUI\" message=\"Creating Company Structure\" timeout=\"1500\"/><action type=\"custom\" snippet=\"CreateRelationshipforName\"/></actions><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions logictype=\"and\"><condition type=\"blank\" operator=\"!=\" fieldmodel=\"SearchByCustomerName\" sourcetype=\"fieldvalue\" field=\"cls_account_id\" fieldtargetobjects=\"SimplyKYC\" value=\"null\" enclosevalueinquotes=\"false\"/></enableconditions></field><field type=\"BUTTON\" hideable=\"true\" uniqueid=\"fi-1OHN-691\"><label>Update CH</label><text>Update CH</text><actions><action type=\"blockUI\" message=\"Updating...\" timeout=\"1500\"/><action type=\"save\"><models><model>Newcustomer</model></models></action><action type=\"custom\" snippet=\"UpdateCustomerDetailsInDb\"/><action type=\"requeryModel\" model=\"Datasourcelogin\" behavior=\"standard\"/><action type=\"requeryModel\" model=\"ShareholderDetails\" behavior=\"standard\"/><action type=\"requeryModel\" model=\"OfficersDetails\" behavior=\"standard\"/><action type=\"custom\" snippet=\"UpdateKYCDBId\"/><action type=\"requeryModel\" model=\"Relationship\" behavior=\"standard\"/><action type=\"custom\" snippet=\"UpdateCutomerDetailsInCL\"/><action type=\"custom\" snippet=\"UpdateRelationshipDetailsInCL\"/></actions><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions logictype=\"and\"><condition type=\"blank\" operator=\"!=\" fieldmodel=\"SearchByCustomerName\" sourcetype=\"fieldvalue\" field=\"cls_account_id\" fieldtargetobjects=\"SimplyKYC\" value=\"null\" enclosevalueinquotes=\"false\"/></enableconditions></field></fields><rowactions><action type=\"redirect\" label=\"Home\" icon=\"sk-icon-account-profile\" window=\"blank\" url=\"/{{cls_account_id}}\"/></rowactions><massactions usefirstitemasdefault=\"true\"><action type=\"massupdate\"/></massactions><views><view type=\"standard\"/></views><renderconditions logictype=\"and\"><rendercondition fieldmodel=\"SearchByCustomerName\" sourcetype=\"modelproperty\" nosourcerowbehavior=\"deactivate\" fieldtargetobjects=\"SimplyKYC\" sourceproperty=\"data.length\" enclosevalueinquotes=\"false\" operator=\"gt\" type=\"fieldvalue\" value=\"1\"/></renderconditions></skootable><skootable showconditions=\"true\" showsavecancel=\"false\" showerrorsinline=\"true\" searchmethod=\"server\" searchbox=\"false\" showexportbuttons=\"false\" hideheader=\"false\" hidefooter=\"false\" pagesize=\"10\" alwaysresetpagination=\"false\" createrecords=\"false\" model=\"Datasourcelogin\" mode=\"read\" allowcolumnreordering=\"false\" responsive=\"false\" uniqueid=\"sk-3-h8-430\" instantfilters=\"true\" emptysearchbehavior=\"query\"><fields><field id=\"company_name\" hideable=\"false\" uniqueid=\"fi-3-hK-489\" showbydefault=\"true\"><label>Company Name</label></field><field id=\"company_number\" hideable=\"false\" uniqueid=\"fi-3-hK-490\" showbydefault=\"true\"><label>Company Registration Number</label></field><field id=\"registered_office_address.postal_code\" hideable=\"true\" uniqueid=\"fi-8FI-539\"><label>Postal Code</label></field><field id=\"cls_account_id\" hideable=\"true\" uniqueid=\"fi-2ksg-1425\"><label>CL Customer ID</label></field><field id=\"id\" hideable=\"true\" uniqueid=\"fi-OuF-1095\"><label>kycid</label><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions/></field><field type=\"BUTTON\" hideable=\"true\" uniqueid=\"fi-293B-1002\"><label>Create Customer</label><text>Create Customer</text><actions><action type=\"blockUI\" timeout=\"1500\" message=\"Creating Customer\"/><action type=\"custom\" snippet=\"CreateContacts \"/><action type=\"requeryModel\" model=\"Datasourcelogin\" behavior=\"standard\"/><action type=\"requeryModel\" behavior=\"standard\" model=\"ShareholderDetails\"><models><model>ShareholderDetails</model><model>Relationship</model></models></action><action type=\"requeryModels\" model=\"OfficersDetails\" behavior=\"standard\"><models><model>OfficersDetails</model><model>Relationship</model></models></action></actions><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions logictype=\"and\"><condition type=\"blank\" operator=\"=\" fieldmodel=\"Datasourcelogin\" sourcetype=\"fieldvalue\" field=\"cls_account_id\" fieldtargetobjects=\"SimplyKYC\" value=\"null\" enclosevalueinquotes=\"false\"/></enableconditions></field><field type=\"BUTTON\" hideable=\"true\" uniqueid=\"fi-293G-1091\"><label>Application</label><text>Create Application</text><actions><action type=\"redirect\" window=\"blank\" url=\"https://saf-saml--saffull--genesisextn.visualforce.com/apex/NewApplication?ent=01I0O000000vYCu&amp;RecordType=0120O000000BRqrQAG&amp;accountid={{cls_account_id}}&amp;retURL=%2Fa7F%2Fo&amp;save_new=1&amp;sfdc.override=1\"/></actions><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions logictype=\"and\"><condition type=\"blank\" operator=\"!=\" fieldmodel=\"Datasourcelogin\" sourcetype=\"fieldvalue\" field=\"cls_account_id\" fieldtargetobjects=\"SimplyKYC\" value=\"null\" enclosevalueinquotes=\"false\"/></enableconditions></field><field type=\"BUTTON\" hideable=\"true\" uniqueid=\"fi-KwV-681\"><label>Create Company Structure</label><text>Create Company Structure</text><actions><action type=\"blockUI\" timeout=\"1500\" message=\"Creating Company Structure\"/><action type=\"custom\" snippet=\"CreateRelationshipforCRN\"/></actions><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions logictype=\"and\"><condition type=\"blank\" operator=\"!=\" fieldmodel=\"Datasourcelogin\" sourcetype=\"fieldvalue\" field=\"cls_account_id\" fieldtargetobjects=\"SimplyKYC\" value=\"null\" enclosevalueinquotes=\"false\"/></enableconditions></field><field type=\"BUTTON\" hideable=\"true\" uniqueid=\"fi-1OHp-784\"><label>Update CH</label><text>Update CH</text><actions><action type=\"blockUI\" message=\"Updating...\" timeout=\"1500\"/><action type=\"save\"><models><model>Newcustomer</model></models></action><action type=\"updateRow\" fieldmodel=\"Newcustomer\" affectedrows=\"context\"><updates><update valuesource=\"modelmerge\" field=\"CustomerRegNumber\" enclosevalueinquotes=\"true\" sourcemodel=\"Datasourcelogin\" sourcefield=\"company_number\"/><update valuesource=\"modelmerge\" field=\"KycDBId\" enclosevalueinquotes=\"true\" sourcemodel=\"Datasourcelogin\" sourcefield=\"id\"/><update valuesource=\"modelmerge\" field=\"CustomerName\" enclosevalueinquotes=\"true\" sourcemodel=\"Datasourcelogin\" sourcefield=\"company_name\"/></updates></action><action type=\"requeryModel\" model=\"Datasourcelogin\" behavior=\"standard\"/><action type=\"requeryModel\" model=\"ShareholderDetails\" behavior=\"standard\"/><action type=\"requeryModel\" model=\"OfficersDetails\" behavior=\"standard\"/><action type=\"requeryModel\" model=\"Relationship\" behavior=\"standard\"/><action type=\"custom\" snippet=\"UpdateCutomerDetailsInCL\"/><action type=\"custom\" snippet=\"UpdateRelationshipDetailsInCL\"/></actions><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions logictype=\"and\"><condition type=\"blank\" operator=\"!=\" fieldmodel=\"Datasourcelogin\" sourcetype=\"fieldvalue\" field=\"cls_account_id\" fieldtargetobjects=\"SimplyKYC\" value=\"null\" enclosevalueinquotes=\"false\"/></enableconditions></field></fields><rowactions><action type=\"redirect\" label=\"Home\" icon=\"sk-icon-account-profile\" window=\"blank\" url=\"/{{cls_account_id}}\"><renderconditions logictype=\"and\"><rendercondition type=\"blank\" operator=\"!=\" fieldmodel=\"Datasourcelogin\" sourcetype=\"fieldvalue\" field=\"cls_account_id\" fieldtargetobjects=\"SimplyKYC\" value=\"null\" enclosevalueinquotes=\"false\"/></renderconditions></action></rowactions><massactions usefirstitemasdefault=\"true\"><action type=\"multi\" label=\"Run multiple actions\" icon=\"sk-icon-magic\"><actions><action type=\"custom\" snippet=\"createCustomer\"/></actions></action></massactions><views><view type=\"standard\"/></views><renderconditions logictype=\"and\"><rendercondition fieldmodel=\"Datasourcelogin\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"deactivate\" sourceproperty=\"data.length\" operator=\"!=\" type=\"blank\" value=\"null\" field=\"company_number\" fieldtargetobjects=\"SimplyKYC\" enclosevalueinquotes=\"false\"/><rendercondition type=\"fieldvalue\" enclosevalueinquotes=\"true\" fieldmodel=\"Datasourcelogin\" sourcetype=\"modelproperty\" nosourcerowbehavior=\"deactivate\" sourceproperty=\"hasRows\"/><rendercondition type=\"fieldvalue\" enclosevalueinquotes=\"false\" fieldmodel=\"SearchByCustomerName\" sourcetype=\"modelproperty\" nosourcerowbehavior=\"deactivate\" sourceproperty=\"data.length\" operator=\"=\" value=\"1\"/></renderconditions><actions defaultlabel=\"Global Actions\" defaulticon=\"sk-icon-magic\" usefirstitemasdefault=\"true\"/><searchfields/></skootable></components><resources><labels/><javascript><jsitem location=\"inlinesnippet\" name=\"CRNSearch\" cachelocation=\"false\" url=\"\">var CustomerModel = skuid.model.getModel('Customer');\nvar CustomerRow = CustomerModel.data[0]; \nvar CustomerId = CustomerRow.Id;\n\n\nvar CreateCustCRN = skuid.model.getModel('Newcustomer');\nvar CreateCustCRNRow = CreateCustCRN.data[0];\nvar CompNumber = CreateCustCRNRow.CustomerRegNumber;\nconsole.log('Contacts:', CompNumber);\n\n\n//alert(CustomerRow.Id);\n//alert(CustomerRow.AccountNumber);\n//if(CustomerRow.AccountNumber)\n//var contextUser = sforce.apex.execute(\"myClass\", \"getContextUserName\", {});\n\nvar ret = sforce.apex.execute(\"SAF_CompanyHouse\",\"getCompanyInfo\",{crn:'CompNumber'});\n // var res = SAF_CompanyHouse.getCompanyInfo('03684484');  \n  //alert('New Account Id: ' + newAccount.Id);  \n\n//alert(ret);\n//console.log(contextUser);   \n\nconsole.log('testtttttttttt!', ret);  \n\n//window.location.reload();\n </jsitem><jsitem location=\"inlinesnippet\" name=\"test_sic\" cachelocation=\"false\" url=\"\">var params = arguments[0],\n\t$ = skuid.$;\n\t\nvar CreateCustCRN = skuid.model.getModel('Datasourcelogin');\nvar CreateCustCRNRow = CreateCustCRN.data[0];\nvar CompNumber = params.row.company_number;\nvar kycdbid = params.row.id;\n\nvar CreateCRNCondition = CreateCustCRN.getConditionByName('company_number');\nCreateCustCRN.setCondition(CreateCRNCondition, CompNumber);\nskuid.model.updateData([CreateCustCRN],function(){\n\n\n\n\nconsole.log('Row CRN number:', CompNumber);\n\nvar queryForCompany = \"select AccountNumber from Account where  AccountNumber = '\"+CompNumber+\"' \";\nvar CustomerCount = sforce.connection.query(queryForCompany);\n//alert('Customer Count' +CustomerCount.size);\nconsole.log(CustomerCount.size);\nif(CustomerCount.size &gt; 0)\n{\n    alert('customer already available');\n}\nelse \n{\n    \n    var rowsIndividual = [];\n    var rowsCorporate = [];\n    var rowofficers =[];\n    var idnvidual = null;\n    var corporate = null;\n    var officers = null;\n    \n    \n    \n    var Shareholders = skuid.model.getModel('ShareholderDetails');\n    var ShareholdersList = Shareholders.data;\n    var ShareholdersCond = Shareholders.getConditionByName('company_Number');\n    Shareholders.setCondition(ShareholdersCond, CompNumber);\n    \n    skuid.model.updateData([Shareholders],function(){\n    \n    \n    //alert('shareholder');\n    var rows = Shareholders.getRows()[0];\n    var rowsData = Shareholders.getRows()[0].data;\n    \n    console.log('rows:', rows);\n    console.log('rowsData:', rowsData);\n    \n    if(rowsData) {\n        for( let i=0;i&lt;rowsData.length;i++)\n        {\n            console.log('rowsData:', rowsData[i].id);\n            var kind = rowsData[i].kind;\n            if(kind.includes(\"corporate\"))\n            {\n                 rowsCorporate.push(rowsData[i]);\n            }\n            else if(kind.includes(\"individual\"))\n            {\n                rowsIndividual.push(rowsData[i]);    \n            }\n        }\n    }\n    \n    \n    console.log('rowsIndividual:', rowsIndividual);\n    console.log('rowsCorporate:', rowsCorporate);\n    \n    \n    if(rowsIndividual.length&gt;0 || rowsCorporate.length&gt;0)\n    {\n        console.log('rowsIndividual.length:', rowsIndividual.length);\n        idnvidual = JSON.stringify(rowsIndividual);\n        corporate = JSON.stringify(rowsCorporate);\n    \n    } \n    \n    console.log('rowsIndividual : ', rowsIndividual);\n    \n    var Officers = skuid.model.getModel('OfficersDetails');\n    var OfficersList = Officers.data;\n    var OfficersCond = Officers.getConditionByName('company_Number');\n    Officers.setCondition(OfficersCond, CompNumber);\n    console.log('comp number for officer', CompNumber);\n    \n    skuid.model.updateData([Officers],function(){\n    \n    // alert('officer');\n    \n    var rowOfficers = Officers.getRows()[0];\n    var rowsOfficersData = Officers.getRows()[0].items;\n    console.log('rowOfficers:', rowOfficers);\n    console.log('rowsOfficersData:', rowsOfficersData);\n    //var officers = JSON.stringify(rowsOfficersData);\n    \n    \n    if(rowsOfficersData)\n    {\n        for(j=0;j&lt;rowsOfficersData.length;j++)\n        {\n            rowofficers.push(rowsOfficersData[j]);\n        } \n    \n    }\n    \n    officers = JSON.stringify(rowofficers); \n    \n    \n    // Create related contact       \n    \n    var cDtl = []; \n    for(var i=0;i&lt;CreateCustCRN.getRows().length;i++)\n    {\n    \n        var row = CreateCustCRN.getRows()[i];\n        console.log('company_number::',row.company_number);\n        console.log('company_status::',row.company_name);\n        // console.log('kycId::', kycId);\n        \n        if(CompNumber == row.company_number){\n            cDtl.push({ \n            'accName': row.company_name,\n            'accNumber': row.company_number,\n            'kycId': row.id,\n            'billingStreet': row.registered_address_line1, \n            'billingCity': row.registered_city,\n            'BillingState': row.registered_county,\n            'billingPostalCode': row.registered_postcode,\n            'billingCountry': row.registered_country,\n            'latestAccountsDate': row.last_accounts_made_up_to,\n            'filingType': row.last_accounts_type,\n            'sic_codes': row.sic_code,\n            'companyStatus': (row.company_status === 'active') ? \"Yes\": \"No\" ,\n            'ownership': row.ownership,\n            'LegalEntity': row.legal_entity_type,\n            'LegalEntiyId': row.legal_entity_type_id,\n            'RegAddressRoad': row.registered_address_road,\n            'RegAddressPremises': row.registered_address_premises\n            \n            });\n            break;\n        }\n    \n    }\n    \n    console.log(cDtl);\n    console.log('cDtl : ', JSON.stringify(cDtl));\n    var CRNDetails = JSON.stringify(cDtl);\n   // var crnDetails = CreateCustNameRow;\n  // alert('test');\n    \n    console.log('CRNDetails::' , CRNDetails);\n    \n    \n    var result =  sforce.apex.execute(\n    'SAF_ContactsUtils',\n    'CreateContacts',\n    {\n      CRNDetail : CRNDetails,\n      cIndividual : idnvidual,\n      cCorporate : corporate,\n      cOfficers : officers\n    }\n    );\n    \n\n    //akert(result);\n    console.log('Result: ' + result);\n    alert('Customer Created Successfully');\n    \n    /*setTimeout(function(){\n    // Turn off the block UI\n    skuid.model.getModel('Datasourcelogin').updateData();\n    skuid.model.getModel('SearchByCustomerName').updateData();\n    skuid.model.getModel('OfficersDetails').updateData();\n    skuid.model.getModel('ShareholderDetails').updateData();\n    },10000); */\n    \n    skuid.snippet.getSnippet('refreshOnload')();\n    // alert('after onload');\n    console.log('kycdbid::', kycdbid);  \n    \n    \n    /* alert('before rel');\n    skuid.snippet.getSnippet('CreateRelationForName')();\n    alert('relationship record created'); */\n    \n    \n    });  //end of set condition for officers\n    \n    });  //end of set condition function for shareholders\n\n} // end of else loop \n    \n});  //end of set condition function for customer model       </jsitem><jsitem location=\"inlinesnippet\" name=\"createCustomer\" cachelocation=\"false\">(function (skuid) {\n    var $ = skuid.$;\n    \nfield = arguments[0], \nvalue = arguments[1];\n\nconsole.log('field:: ', field);\nconsole.log('value:: ', value);\n\nvar cellElem = field.element;\n\nvar CustomerModel = skuid.model.getModel('Customer');\nvar CustomerRow = CustomerModel.data[0]; \nvar CustomerId = CustomerRow.Id;\n\nconsole.log('CustomerModel::', CustomerModel);\n\nvar CreateCustCRN = skuid.model.getModel('Datasourcelogin');\nvar CreateCustCRNRow = CreateCustCRN.data[0];\nvar CompNumber = CreateCustCRNRow.company_number;\n\nvar CreateCustName = skuid.model.getModel('SearchByCustomerName');\nvar CustomerName = CreateCustName.data; \n//selectedItems = list.getSelectedItems();\nconsole.log('CustomerName::', CustomerName);\n\nmodel = arguments[0].model.getModel('SearchByCustomerName');\n    //selectedItems = list.getSelectedItems();\n    \n    //console.log('selectedItems::',selectedItems);\n    \n    // var item = arguments[0].item,\n    // model = arguments[0].model,\n    // leadRow = item.row;\n    \n\n//alert(CompNumber);\n\n//Query for existing customers\nvar queryForCompany = \"select AccountNumber from Account where  AccountNumber = '\"+CompNumber+\"' \";\n\n\n//Count to check the number of records\nvar CustomerCount = sforce.connection.query(queryForCompany);\n//alert('Customer Count' +CustomerCount.size);\nconsole.log(CustomerCount.size);\nif(CustomerCount.size &gt; 0)\n{\n    alert('customer already available');\n}\nelse \n{\n//      $.each(CreateCustCRN.getRows(),function(i,row) \n//     {\n        \n//           CustomerModel.createRow({\n//                 additionalConditions: [\n//                 {field: 'Name' , value: row.company_name},\n//     \t\t\t{field: 'AccountNumber' , value: row.company_number},\n//     \t\t\t{field: 'Type', value: 'Account'},\n//             \t{field: 'BillingStreet' , value: row.registered_office_address.address_line_1},\n//                 {field: 'BillingCity' , value:  row.registered_office_address.address_line_2},\n//                 {field: 'BillingState' , value: row.registered_office_address.locality},\n//                 {field: 'BillingPostalCode' , value: row.registered_office_address.postal_code},\n//                 {field: 'BillingCountry' , value: row.registered_office_address.country},\n//                 {field: 'SAF_latestAccountsDate__c' , value: row.accounts.last_accounts.made_up_to},\n//                 {field: 'SAF_filingType__c' , value: row.accounts.last_accounts.type},\n//                 {field: 'Ownership', value: 'Private Limited Company'},\n//     \t\t\t{field: 'Sic' , value: row.sic_codes}\n//     \t\t\t]   \n               \n//           }); \n      \n//     });\n   \n//     CustomerModel.save({callback: function(resultSave)\n\n//     { \n//         console.log('resultSave: ', resultSave); \n//         //console.log('CustomerModel:', JSON.stringify(CustomerModel.getFirstRow()));\n//         console.log('getFirstRow()..', CustomerModel.getFirstRow());\n//       // var id = CustomerModel.getFirstRow().Id;\n//         //var __skuid_record__ = CustomerModel.getFirstRow().__skuid_record__;\n//         //var __id = CustomerModel.getFirstRow().__skuid_record__['__id'];\n        \n//       // console.log('id:', id);\n//         //console.log('id:', __skuid_record__);\n//         //console.log('id:', __id);\n      \n//         if(resultSave.totalsuccess)\n//         { \n//             console.log('Saved Successfully'); \n//             alert('Customer Created Successfully');\n//         }\n//         else \n//         {\n//             console.log('Save failed');\n//         }\n//     }\n    \n// });\n\n}\n\n\n\n\n})(skuid);</jsitem><jsitem location=\"inlinesnippet\" name=\"CreateCustomerWithName\" cachelocation=\"false\">\nvar params = arguments[0],\n$ = skuid.$; \nvar r1=arguments[0].item;\nvar r2=arguments[0].list;\nvar r3=arguments[0].model;\n\n//var row=r1.row;\n//console.log('r1'+r1);\n//console.log('row'+row.company_number);\n\nalert(params.row.company_number);\nvar CreateCustName = skuid.model.getModel('SearchByCustomerName');\n \nvar CustomerModel = skuid.model.getModel('Customer');\n\nvar CompNumber = params.row.company_number;\nvar queryForCompany = \"select AccountNumber from Account where  AccountNumber = '\"+CompNumber+\"' \";\n\nalert(CompNumber);\n//Count to check the number of records\nvar CustomerCount = sforce.connection.query(queryForCompany);\n//alert('Customer Count' +CustomerCount.size);\nconsole.log(CustomerCount.size);\nif(CustomerCount.size &gt; 0)\n{\n    alert('customer already available');\n}\nelse \n{\n $.each(CreateCustName.getRows(),function(i,row) \n {\n CustomerModel.createRow({\n                additionalConditions: [\n                {field: 'Name' , value: row.company_name},\n    \t\t\t{field: 'AccountNumber' , value: row.company_number},\n    \t\t\t{field: 'Type', value: 'Account'},\n    \t\t\t{field: 'Ownership', value: 'Private Limited Company'},\n    \t\t\t//{field: 'Sic' , value: row.sic_codes},\n    \t\t\t{field: 'BillingStreet' , value: row.registered_office_address.address_line_1},\n                {field: 'BillingCity' , value:  row.registered_office_address.address_line_2},\n                {field: 'BillingState' , value: row.registered_office_address.locality},\n                {field: 'BillingPostalCode' , value: row.registered_office_address.postal_code},\n                {field: 'BillingCountry' , value: row.registered_office_address.country}\n                \n    \t\t\t]   \n               \n           }); \n \n });\n\nCustomerModel.save({callback: function(resultSave)\n\n    { \n        console.log('resultSave: ', resultSave); \n        // var query = \"select Id from Account where AccountNumber = '\"+CompNumber+\"' \";\n        \n        // //Count to check the number of records\n        // console.log('query:', query);\n        // var result = sforce.connection.query(query);\n        // console.log('result:', result);\n        // var records = result.getArray(\"records\");\n        // console.log('records:', records);\n\n        // //result = sforce.connection.query(query);\n        // //records = result.getArray(\"records\");\n        \n        // for (var i=0; i&lt; records.length; i++) {\n        //   var record = records[i];\n        //   console.log(\" -- \" + record.Id);\n        // }\n        \n        \n        // alert('Customer :: ' +CustomerCount);\n        \n        // console.log('id:', id);\n        // //console.log('id:', __skuid_record__);\n        // console.log('id:', __id);\n      \n        if(resultSave.totalsuccess)\n        { \n            console.log('Saved Successfully'); \n            alert('Customer Created Successfully');\n        }\n        else \n        {\n            console.log('Save failed');\n        }\n    }\n    \n});           \n\n        var query = \"select Id from Account where AccountNumber = '\"+CompNumber+\"' \";\n        \n        //Count to check the number of records\n        console.log('query:', query);\n        var result = sforce.connection.query(query);\n        console.log('result:', result);\n        var records = result.getArray(\"records\");\n        console.log('records:', records);\n\n        //result = sforce.connection.query(query);\n        //records = result.getArray(\"records\");\n        \n        for (var i=0; i&lt; records.length; i++) {\n          var record = records[i];\n          console.log(\" -- \" + record.Id);\n        }\n        \n \n}\n\n</jsitem><jsitem location=\"external\" name=\"connectionJS\" cachelocation=\"false\" url=\"/soap/ajax/36.0/connection.js\">var params = arguments[0],\n\t$ = skuid.$;\n</jsitem><jsitem location=\"external\" name=\"apexJS\" cachelocation=\"false\" url=\"/soap/ajax/36.0/apex.js\">var params = arguments[0],\n\t$ = skuid.$;\n</jsitem><jsitem location=\"inlinesnippet\" name=\"CreateContacts \" cachelocation=\"false\" url=\"\">var params = arguments[0],\n\t$ = skuid.$;\n\t\nvar CreateCustCRN = skuid.model.getModel('Datasourcelogin');\nvar CreateCustCRNRow = CreateCustCRN.data[0];\nvar CompNumber = CreateCustCRNRow.company_number;\nvar CustKycId = CreateCustCRNRow.id;\nconsole.log('kycid of customer:', CustKycId);\nconsole.log('customer:', CompNumber);\n\nvar queryForCompany = \"select AccountNumber from Account where  AccountNumber = '\"+CompNumber+\"' \";\n//Count to check the number of records\nvar CustomerCount = sforce.connection.query(queryForCompany);\n//alert('Customer Count' +CustomerCount.size);\nconsole.log(CustomerCount.size);\nif(CustomerCount.size &gt; 0)\n{\n    alert('customer already available');\n}\nelse \n{\n\n\nvar Shareholders = skuid.model.getModel('ShareholderDetails');\nvar ShareholdersList = Shareholders.data;\n\n\nconsole.log('ShareholdersList:', ShareholdersList);\nconsole.log('getRows', Shareholders.getRows());\nvar rows = Shareholders.getRows()[0];\nvar rowsData = Shareholders.getRows()[0].data;\nconsole.log('rows:', rows);\nconsole.log('rowsData:', rowsData);\n//console.log(rowsData.id);\n\nvar rowsIndividual = [];\nvar rowsCorporate = [];\nvar idnvidual = null;\n var corporate = null;\n\nif(rowsData){\n    for(i=0;i&lt;rowsData.length;i++){\n        console.log('rowsData:', rowsData[i].id);\n        var kind = rowsData[i].kind;\n        if(kind.includes(\"corporate\")){\n            rowsCorporate.push(rowsData[i]);\n        }else if(kind.includes(\"individual\")){\n            rowsIndividual.push(rowsData[i]);    \n        }\n    }\n}\n\nconsole.log('rowsIndividual:', rowsIndividual);\nconsole.log('rowsCorporate:', rowsCorporate);\n\n\n// Create related contact       \n\nif(rowsIndividual.length&gt;0 || rowsCorporate.length&gt;0){\n    console.log('rowsIndividual.length:', rowsIndividual.length);\n     idnvidual = JSON.stringify(rowsIndividual);\n     corporate = JSON.stringify(rowsCorporate);\n    console.log('rowsIndividual inside if : ', idnvidual);\n    console.log('rowsCorporate inside if : ', corporate);\n\n}\n\n\nvar Officers = skuid.model.getModel('OfficersDetails');\nvar OfficersList = Officers.data;\nconsole.log('', OfficersList);\n\nvar rowsOfficersData = Officers.getRows()[0].items;\nconsole.log('rowsOfficersData:', rowsOfficersData);\nvar officers = null;\nif(rowsOfficersData){\n    officers = JSON.stringify(rowsOfficersData);\n}\n\n\nconsole.log('row details for customer',CreateCustCRN.getRows());\n \nvar cDtl = []; \n $.each(CreateCustCRN.getRows(),function(i,row) \n    {\n        console.log('company_number::',row.company_number);\n        console.log('company_status::',row.company_status);\n        console.log('kycid::',row.id);\n        \n        cDtl.push({ \n            'accName': row.company_name,\n            'accNumber': row.company_number,\n            'kycId': row.id,\n            'billingStreet': row.registered_address_line1,\n            'billingCity': row.registered_city,\n            'BillingState': row.registered_county,\n            'billingPostalCode': row.registered_postcode,\n            'billingCountry': row.registered_country,\n            //'accMadeUpTo': row.accounts.last_accounts.made_up_to,\n            //'acctype': row.accounts.last_accounts.type,\n            'sic_codes': row.sic_code,\n            'companyStatus': (row.company_status === 'active') ? \"Yes\": \"No\",\n            //(A ===\"red\") ? \"hot\":\"cool\";\n            'ownership': row.ownership,\n            'LegalEntity': row.legal_entity_type,\n            'LegalEntiyId': row.legal_entity_type_id,\n            'RegAddressRoad': row.registered_address_road,\n            'RegAddressPremises': row.registered_address_premises\n            \n            \n        });\n});\nconsole.log(cDtl);\nconsole.log('cDtl : ', JSON.stringify(cDtl));\nvar CRNDetails = JSON.stringify(cDtl);\nvar crnDetails = CreateCustCRNRow;\n \n        \n        var result = sforce.apex.execute(\n          'SAF_ContactsUtils',\n          'CreateContacts',\n          {\n              CRNDetail : CRNDetails,\n              cIndividual : idnvidual,\n              cCorporate : corporate,\n              cOfficers : officers\n          }\n        );\n        console.log('Result: ' + result);\n        alert('Customer Created Successfully');\n\n  // }if\n}\n      \n        </jsitem><jsitem location=\"inline\" name=\"Onload\" cachelocation=\"false\" url=\"\">(function(skuid){\n\tvar $ = skuid.$;\n\t$(document.body).one('pageload',function(){\n\t\tvar myModel = skuid.model.getModel('MyModelId');\n\t\tvar myComponent = skuid.component.getById('MyComponentUniqueId');\n\t\t$(document).on('keypress',\".enterevent input\",function(){\n          if(event.which === 13) {\n              skuid.model.getModel('Datasourcelogin').updateData();\n              skuid.model.getModel('SearchByCustomerName').updateData();\n              skuid.model.getModel('OfficersDetails').updateData();\n              skuid.model.getModel('ShareholderDetails').updateData();\n              skuid.model.getModel('Relationship').updateData();\n              \n            } \n        });\n\n//         $(\".input1\").on('keyup', function (e) {\n//     if (e.key === 'Enter' || e.keyCode === 13) {\n//         // Do something\n//     }\n// });\n    skuid.snippet.registerSnippet('refreshOnload',function(ref){\n      \n       skuid.model.getModel('Datasourcelogin').updateData();\n              skuid.model.getModel('SearchByCustomerName').updateData();\n              skuid.model.getModel('ShareholderDetails').updateData();  \n              skuid.model.getModel('OfficersDetails').updateData();\n        \n    });\n   // alert('onload');\n    \n    \n\t});\n\t\n\t\n\t\n})(skuid);</jsitem><jsitem location=\"inlinesnippet\" name=\"CreateCustomerandContact\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\n\t\nvar CreateCustCRN = skuid.model.getModel('Datasourcelogin');\nvar CreateCustCRNRow = CreateCustCRN.data[0];\nvar CompNumber1 = CreateCustCRNRow.company_number;\nconsole.log('Contacts:', CompNumber);\n\nvar CreateCustName = skuid.model.getModel('SearchByCustomerName');\nvar CreateCustNameRow = CreateCustName.data[0];\nvar CompNumber =  params.row.company_number; //CreateCustNameRow.company_number; //CompNumber = \nvar kycdbid = params.row.id;\n\n//alert(CompNumber);\n\nvar queryForCompany = \"select AccountNumber from Account where  AccountNumber = '\"+CompNumber+\"' \";\nvar CustomerCount = sforce.connection.query(queryForCompany);\n//alert('Customer Count' +CustomerCount.size);\nconsole.log(CustomerCount.size);\nif(CustomerCount.size &gt; 0)\n{\n    alert('customer already available');\n}\nelse \n{\n\n\nvar rowsIndividual = [];\nvar rowsCorporate = [];\nvar rowofficers =[];\nvar idnvidual = null;\nvar corporate = null;\nvar officers = null;\n\n\n\nvar Shareholders = skuid.model.getModel('ShareholderDetails');\nvar ShareholdersList = Shareholders.data;\nvar ShareholdersCond = Shareholders.getConditionByName('company_Number');\nShareholders.setCondition(ShareholdersCond, CompNumber);\n\nskuid.model.updateData([Shareholders],function(){\n    \n\n//alert('shareholder');\nvar rows = Shareholders.getRows()[0];\nvar rowsData = Shareholders.getRows()[0].data;\n\nconsole.log('rows:', rows);\nconsole.log('rowsData:', rowsData);\n\nif(rowsData) {\n    for( let i=0;i&lt;rowsData.length;i++)\n    {\n        console.log('rowsData:', rowsData[i].id);\n        var kind = rowsData[i].kind;\n        if(kind.includes(\"corporate\"))\n        {\n            rowsCorporate.push(rowsData[i]);\n        }\n        else if(kind.includes(\"individual\"))\n        {\n            rowsIndividual.push(rowsData[i]);    \n        }\n    }\n}\n\n\nconsole.log('rowsIndividual:', rowsIndividual);\nconsole.log('rowsCorporate:', rowsCorporate);\n\n\nif(rowsIndividual.length&gt;0 || rowsCorporate.length&gt;0)\n{\n    console.log('rowsIndividual.length:', rowsIndividual.length);\n    idnvidual = JSON.stringify(rowsIndividual);\n    corporate = JSON.stringify(rowsCorporate);\n\n} \n\nconsole.log('rowsIndividual : ', rowsIndividual);\n\nvar Officers = skuid.model.getModel('OfficersDetails');\nvar OfficersList = Officers.data;\nvar OfficersCond = Officers.getConditionByName('company_Number');\nOfficers.setCondition(OfficersCond, CompNumber);\nconsole.log('comp number for officer', CompNumber);\n\nskuid.model.updateData([Officers],function(){\n    \n   // alert('officer');\n    \nvar rowOfficers = Officers.getRows()[0];\nvar rowsOfficersData = Officers.getRows()[0].items;\nconsole.log('rowOfficers:', rowOfficers);\nconsole.log('rowsOfficersData:', rowsOfficersData);\n//var officers = JSON.stringify(rowsOfficersData);\n\n\nif(rowsOfficersData){\n    for(j=0;j&lt;rowsOfficersData.length;j++){\n      rowofficers.push(rowsOfficersData[j]);\n    } \n    \n}\n\nofficers = JSON.stringify(rowofficers); \n\n\n// Create related contact       \n\nvar cDtl = []; \nfor(var i=0;i&lt;CreateCustName.getRows().length;i++){\n     \n     var row = CreateCustName.getRows()[i];\n     console.log('company_number::',row.company_number);\n     console.log('company_status::',row.company_name);\n    // console.log('kycId::', kycId);\n     \n      if(CompNumber == row.company_number){\n         cDtl.push({ \n            'accName': row.company_name,\n            'accNumber': row.company_number,\n            'kycId': row.id,\n            'billingStreet': row.registered_address_line1, \n            'billingCity': row.registered_city,\n            'BillingState': row.registered_county,\n            'billingPostalCode': row.registered_postcode,\n            'billingCountry': row.registered_country,\n           'latestAccountsDate': row.last_accounts_made_up_to,\n            'filingType': row.last_accounts_type,\n            'sic_codes': row.sic_code,\n            'companyStatus': (row.company_status === 'active') ? \"Yes\": \"No\" ,\n            'ownership': row.ownership,\n            'LegalEntity': row.legal_entity_type,\n            'LegalEntiyId': row.legal_entity_type_id,\n            'RegAddressRoad': row.registered_address_road,\n            'RegAddressPremises': row.registered_address_premises\n            \n            \n         });\n         break;\n      }\n   \n}\n\nconsole.log(cDtl);\nconsole.log('cDtl : ', JSON.stringify(cDtl));\nvar CRNDetails = JSON.stringify(cDtl);\nvar crnDetails = CreateCustNameRow;\n \n        \n        var result =  sforce.apex.execute(\n          'SAF_ContactsUtils',\n          'CreateContacts',\n          {\n              CRNDetail : CRNDetails,\n              cIndividual : idnvidual,\n              cCorporate : corporate,\n              cOfficers : officers\n          }\n        );\n        console.log('Result: ' + result);\n        alert('Customer Created Successfully');\n        \n        /*setTimeout(function(){\n    // Turn off the block UI\n        skuid.model.getModel('Datasourcelogin').updateData();\n      skuid.model.getModel('SearchByCustomerName').updateData();\n      skuid.model.getModel('OfficersDetails').updateData();\n      skuid.model.getModel('ShareholderDetails').updateData();\n        },10000); */\n        \n        skuid.snippet.getSnippet('refreshOnload')();\n   // alert('after onload');\n   console.log('kycdbid::', kycdbid);  \n   \n   \n  /* alert('before rel');\n   skuid.snippet.getSnippet('CreateRelationForName')();\n    alert('relationship record created'); */\n \n \n}); \n    \n});   \n \n    \n    \n    \n\n}\n    \n\n\n\n\n\n\n\n</jsitem><jsitem location=\"inlinesnippet\" name=\"test2\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\n\n//window.location.reload(false);\n\n\n(function(skuid){\n\t\n// \tvar $ = skuid.$;\n\nvar CompNumber =  params.row.company_number; //CreateCustNameRow.company_number; //CompNumber = \nalert(\"refresh page: \" + CompNumber);\nconsole.log(params.button[0]);\n\nvar CreateCustName = skuid.model.getModel('SearchByCustomerName');\nvar CreateCustNameRow = CreateCustName.data[0];\nvar clsAccId =  params.row.cls_account_id;\n\nalert(clsAccId);\n\nvar div = params.button[0].parentElement.previousSibling.firstChild.firstChild;\n\ndiv.innerHTML = \"test\";\n\nconsole.log(div);\n\nconsole.log(params.row);\n\n// \t\tvar myModel = skuid.model.getModel('MyModelId');\n// \t\tvar myComponent = skuid.component.getById('MyComponentUniqueId');\n// \t\t$(document).on('keypress',\".enterevent input\",function(){\n//           if(event.which === 13) {\n              \n//               skuid.model.getModel('Datasourcelogin').updateData();\n//               skuid.model.getModel('SearchByCustomerName').updateData();\n//               skuid.model.getModel('OfficersDetails').updateData();\n//               skuid.model.getModel('ShareholderDetails').updateData();\n//             } \n//         });\n\n\n\n})(skuid);</jsitem><jsitem location=\"inlinesnippet\" name=\"UpdateCRNDetailsToDB\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\n\n\nvar params = arguments[0],\n\t$ = skuid.$;\n\n\nvar CreateCustCRN = skuid.model.getModel('Datasourcelogin');\nvar CreateCustCRNRow = CreateCustCRN.data[0];\nvar CompNumber = CreateCustCRNRow.company_number;\n\nconsole.log('CompNumber:', CompNumber);\nvar result = sforce.apex.execute(\n          'SAF_ContactsUtils',\n          'UpdateContacts',\n          {\n              CRNumber : CompNumber,\n          }\n        );\n        console.log('Result: ' + result);\n        \n\nalert('Updated customer details');</jsitem><jsitem location=\"inlinesnippet\" name=\"UpdateCustomerNameDetailsToDB\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\n\n\n// var CreateCustCRN = skuid.model.getModel('Datasourcelogin');\n// var CreateCustCRNRow = CreateCustCRN.data[0];\n// var CompNumber = CreateCustCRNRow.company_number;\n\nvar CreateCustName = skuid.model.getModel('SearchByCustomerName');\nvar CreateCustNameRow = CreateCustName.data[0];\nvar CompNumber =  params.row.company_number; \n\nconsole.log('CompNumber:', CompNumber);\nvar result = sforce.apex.execute(\n          'SAF_ContactsUtils',\n          'UpdateContacts',\n          {\n              CRNumber : CompNumber,\n          }\n        );\n        console.log('Result: ' + result);\n        \n\nalert('Updated customer details');</jsitem><jsitem location=\"inlinesnippet\" name=\"CreateRelationshipforCRN\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\n\n\nvar CreateCustCRN = skuid.model.getModel('Datasourcelogin');\nvar CreateCustCRNRow = CreateCustCRN.data[0];\nvar CompNumber = CreateCustCRNRow.company_number;\nvar CustKycId = CreateCustCRNRow.id;\n\nconsole.log('kycid of customer:', CustKycId);\nconsole.log('customer:', CompNumber);\n\n//Relationship model details\nvar RowRelationship = [];\nvar Relationship = skuid.model.getModel('Relationship');\n\nvar RelationshipRow = Relationship.getRows()[0];\nconsole.log('relationshiprows',RelationshipRow );\n\n//var RelationshipRowData = Relationship.getRows()[0].data;\nvar RelationshipRowData = RelationshipRow.data;\nconsole.log('row details for relationship table:' , RelationshipRowData);\n\n//var relationshiRowpresp = JSON.stringify(RelationshipRowData);\n\nvar relationshiRowpresp = JSON.stringify(RelationshipRowData);\n\nconsole.log('Relationship table response:', relationshiRowpresp);\n\nvar result = sforce.apex.execute('saf_CreateRelationship', 'CreateRelationship',\n                {\n                    CRN : CompNumber,\n                    kycid : CustKycId,\n                    Relationresp : relationshiRowpresp\n                    \n                }\n            );\n            console.log('Result: ' + result);\n            alert('Company Structure created Successfully');</jsitem><jsitem location=\"inlinesnippet\" name=\"CreateRelationshipforName\" cachelocation=\"false\">//var RowRelationship = [];\n//var Relresp = null;\n\n//Relationship model details fro crn\n/* var Relationship = skuid.model.getModel('Relationship');\n//var RelationshipList = Relationship.data;\nvar RelationshipRow = Relationship.getRows()[0];\nconsole.log('relationshiprows',RelationshipRow );\nvar RelationshipRowData = Relationship.getRows()[0].data; */\n\n\n//---------------------------------new code ----------------------------starts\nvar params = arguments[0],\n\t$ = skuid.$;\n\n\nvar CreateCustName = skuid.model.getModel('SearchByCustomerName');\nvar CreateCustNameRow = CreateCustName.data[0];\nvar CompNumber =  params.row.company_number; //CreateCustNameRow.company_number; //CompNumber = \nvar kycdbid = params.row.id;\n\n//alert(CompNumber);\n\nconsole.log('kycid of customer:', kycdbid);\nconsole.log('customer reg number:', CompNumber);\n\n\nvar RelationshipbyName = skuid.model.getModel('RelationshipforName');\nvar RelationshipbyNameLst = RelationshipbyName.data;\nvar RelbyNameCond1 = RelationshipbyName.getConditionByName('kycpartyid_fetch');\nRelationshipbyName.setCondition(RelbyNameCond1, kycdbid);\nvar RelbyNameCond2 = RelationshipbyName.getConditionByName('CompRegNum_fetch');\nRelationshipbyName.setCondition(RelbyNameCond2, CompNumber);\n\nskuid.model.updateData([RelationshipbyName],function(){ \n\n\tvar RelationshipbyNameRow = RelationshipbyName.getRows()[0];\n\tconsole.log('RelationshipbyNameRow::', RelationshipbyNameRow);\n    \n    var RelationshipbyNameRowData = RelationshipbyName.getRows()[0].data;\n    console.log('RelationshipbyNameRowData::::',RelationshipbyNameRowData );\n    \n  //if(RelationshipbyNameRowData)\n  //  {   \n        \n         var RowRelationship = JSON.stringify(RelationshipbyNameRowData);    \n        \n           \n   // }        \n   // Relresp = JSON.stringify(RowRelationship);\n    console.log('Relationship table response:', RowRelationship);\n    console.log('company reg number', CompNumber);\n    console.log('kycid:', kycdbid);\n    \n    \n    var result = sforce.apex.execute('saf_CreateRelationship', 'CreateRelationship',\n                {\n                    CRN : CompNumber,\n                    kycid : kycdbid,\n                    Relationresp : RowRelationship\n                }\n            );\n            console.log('Result: ' + result);\n            alert(result);\n           // alert('Company Structure created Successfully');\n           /* if(result == Error)\n            {\n                alert('Please contact your administrator, company structure did not created');\n            }\n            else{ \n                alert('Company Structure created Successfully');\n            } */\n\n });\n\n\n//---------------------------------new code ----------------------------ends\n\n\n\n/*console.log('row details for relationship table:' , RelationshipRowData);\n\nvar relationshiRowpresp = JSON.stringify(RelationshipRowData);\n\nconsole.log('Relationship table response:', relationshiRowpresp);\n\nvar result = sforce.apex.execute('saf_CreateRelationship', 'CreateRelationship',\n                {\n                    CRN : CompNumber,\n                    kycid : CustKycId,\n                    Relationresp : relationshiRowpresp\n                }\n            );\n            console.log('Result: ' + result);\n            \n            */\n</jsitem><jsitem location=\"inlinesnippet\" name=\"UpdateCustomerDetailsInDb\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\nvar Newcustomer = skuid.model.getModel('Newcustomer');\n var appRow = Newcustomer.data[0];\nvar CreateCustName = skuid.model.getModel('Datasourcelogin');\n\nvar CRNumber =  params.row.company_number; \nconsole.log('CRNumber ::'+CRNumber);\n\n/*$.each(Newcustomer.getRows(),function(i,row) \n {\n\nNewcustomer.updateRow({\nadditionalConditions: [\n                {field: 'CustomerRegNumber' , value: CRNumber},\n\t\t\t\t]   \n\n}); \n});*/\n\n//console.log('CreateCustName.data[0].id :::'+CreateCustName.data[0]);\n//console.log('CreateCustName.data[0].id :::'+CreateCustName.data[0].id);\nNewcustomer.updateRow(appRow, {CustomerRegNumber: params.row.company_number});\n//Newcustomer.updateRow(appRow, {KycDBId: CreateCustName.data[0].id});\n//Newcustomer.updateRow(appRow, {CustomerName: CreateCustName.data[0].company_name});\n\nNewcustomer.save({callback: function(result){\n    if (result.totalsuccess) {\n        console.log('update success');\n    } else {\n        console.log('The updation is failed.');\n    }\n}});</jsitem><jsitem location=\"inlinesnippet\" name=\"UpdateKYCDBId\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\nvar Newcustomer = skuid.model.getModel('Newcustomer');\n var appRow = Newcustomer.data[0];\nvar CreateCustName = skuid.model.getModel('SearchByCustomerName');\n\nvar CRNumber =  params.row.company_number; \nconsole.log('CRNumber ::'+CRNumber);\n\n\nconsole.log('CreateCustName.data[0]:::'+params.row.company_name);\nconsole.log('CreateCustName.data[0].id :::'+params.row.id);\n//Newcustomer.updateRow(appRow, {CustomerRegNumber: params.row.company_number});\n//Newcustomer.updateRow(appRow, {KycDBId: CreateCustName.data[0].id});\n//Newcustomer.updateRow(appRow, {CustomerName: CreateCustName.data[0].company_name});\n\nNewcustomer.updateRow(appRow, {KycDBId: params.row.id});\nNewcustomer.updateRow(appRow, {CustomerName: params.row.company_name});\n\nNewcustomer.save({callback: function(result){\n    if (result.totalsuccess) {\n        console.log('update success');\n    } else {\n        console.log('The updation is failed.');\n    }\n}});</jsitem><jsitem location=\"inlinesnippet\" name=\"UpdateRelationshipDetailsInCL\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\n\t\nvar CreateCustCRN = skuid.model.getModel('Datasourcelogin');\nvar CreateCustCRNRow = CreateCustCRN.data[0];\nvar CompNumber = params.row.company_number;\n\nvar CreateCRNCondition = CreateCustCRN.getConditionByName('company_number');\nCreateCustCRN.setCondition(CreateCRNCondition, CompNumber);\n    skuid.model.updateData([CreateCustCRN],function(){\n        \n        var queryForCompany = \"SELECT AccountNumber FROM Account WHERE AccountNumber = '\"+CompNumber+\"' \";\n        var CustomerCount = sforce.connection.query(queryForCompany);\n        console.log(CustomerCount.size);\n        \n        if(CustomerCount.size &gt; 0)\n        {\n            var rowsRelationship = [];\n            var relationship = null;\n            \n            var Relationships = skuid.model.getModel('Relationship');\n            var RelationshipsList = Relationships.data;\n            var RelationshipsCond = Relationships.getConditionByName('company_Number');\n            Relationships.setCondition(RelationshipsCond, CompNumber);\n            \n            skuid.model.updateData([Relationships],function(){\n                var rows = Relationships.getRows()[0];\n                var rowsData = Relationships.getRows()[0].data;\n                console.log('rowsDatas:', rowsData);\n    \n                if(rowsData) {\n                    for( let i=0;i&lt;rowsData.length;i++)\n                    {\n                        rowsRelationship.push(rowsData[i]);    \n                    }\n                }\n                \n               if(rowsRelationship.length&gt;0 )\n                {\n                    console.log('Number of Relationship :', rowsRelationship.length);\n                    relationship = JSON.stringify(rowsRelationship);\n                    console.log('relationship:'+relationship);\n\t\t\t\t\t\n\t\t\t\t\t var result =  sforce.apex.execute(\n                    'saf_CreateRelationship',\n                    'updateRelationshipfromDB',\n                    {\n                      relationship : relationship\n                    }\n                    );\n                    \n                    console.log(result);\n                   // alert(result);\n                } \n            });\n        }\n    }); </jsitem><jsitem location=\"inlinesnippet\" name=\"UpdateCutomerDetailsInCL\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\n\t\nvar CreateCustCRN = skuid.model.getModel('Datasourcelogin');\nvar CreateCustCRNRow = CreateCustCRN.data[0];\nvar CompNumber = params.row.company_number;\n\nconsole.log('CompNumber :::'+CompNumber);\n\nvar CreateCRNCondition = CreateCustCRN.getConditionByName('company_number');\nCreateCustCRN.setCondition(CreateCRNCondition, CompNumber);\n    skuid.model.updateData([CreateCustCRN],function(){\n        \n        var queryForCompany = \"SELECT AccountNumber FROM Account WHERE AccountNumber = '\"+CompNumber+\"' \";\n        var CustomerCount = sforce.connection.query(queryForCompany);\n        console.log(CustomerCount.size);\n        \n        if(CustomerCount.size &gt; 0)\n        {\n            var rowsIndividual = [];\n            var rowsCorporate = [];\n            var rowofficers =[];\n            var idnvidual = null;\n            var corporate = null;\n            var officers = null;\n            \n            var Shareholders = skuid.model.getModel('ShareholderDetails');\n            var ShareholdersList = Shareholders.data;\n            var ShareholdersCond = Shareholders.getConditionByName('company_Number');\n            Shareholders.setCondition(ShareholdersCond, CompNumber);\n            \n            //skuid.model.updateData([Shareholders],function(){\n                var rows = Shareholders.getRows()[0];\n                var rowsData = Shareholders.getRows()[0].data;\n                console.log('Shareholders rows:', rows);\n                console.log('Shareholders rowsData:', rowsData);\n    \n                if(rowsData) {\n                    for( let i=0;i&lt;rowsData.length;i++)\n                    {\n                        console.log('rowsData:', rowsData[i].id);\n                        var kind = rowsData[i].kind;\n                        if(kind.includes(\"corporate\"))\n                        {\n                             rowsCorporate.push(rowsData[i]);\n                        }\n                        else if(kind.includes(\"individual\"))\n                        {\n                            rowsIndividual.push(rowsData[i]);    \n                        }\n                    }\n                }\n                \n                \n                console.log('rowsIndividual:', rowsIndividual);\n                console.log('rowsCorporate:', rowsCorporate);\n    \n                \n               if(rowsIndividual.length&gt;0 || rowsCorporate.length&gt;0)\n                {\n                    console.log('rowsIndividual.length:', rowsIndividual.length);\n                    idnvidual = JSON.stringify(rowsIndividual);\n                    corporate = JSON.stringify(rowsCorporate);\n                \n                } \n                \n                console.log('JSON.stringify(rowsIndividual):', idnvidual);\n                console.log('JSON.stringify(rowsCorporate):', rowsCorporate);\n                \n                var Officers = skuid.model.getModel('OfficersDetails');\n                var OfficersList = Officers.data;\n                var OfficersCond = Officers.getConditionByName('company_Number');\n                Officers.setCondition(OfficersCond, CompNumber);\n                console.log('comp number for officer', CompNumber);\n                //skuid.model.updateData([Officers],function(){\n                    var rowOfficers = Officers.getRows()[0];\n                    var rowsOfficersData = Officers.getRows()[0].items;\n                    console.log('rowOfficers:', rowOfficers);\n                    console.log('rowsOfficersData:', rowsOfficersData);\n                    \n                    if(rowsOfficersData)\n                    {\n                        for(j=0;j&lt;rowsOfficersData.length;j++)\n                        {\n                            rowofficers.push(rowsOfficersData[j]);\n                        } \n                    \n                    }\n                    \n                    officers = JSON.stringify(rowofficers); \n                    console.log('JSON.stringify(rowofficers):', officers);\n\n                    var cDtl = []; \n                    for(var i=0;i&lt;CreateCustCRN.getRows().length;i++)\n                    {\n                    \n                        var row = CreateCustCRN.getRows()[i];\n                        console.log('company_number::',row.company_number);\n                        console.log('company_status::',row.company_name);\n                \n                        if(CompNumber == row.company_number){\n                            cDtl.push({ \n                            'accName': row.company_name,\n                            'accNumber': row.company_number,\n                            'kycId': row.id,\n                            'billingStreet': row.registered_address_line1, \n                            'billingCity': row.registered_city,\n                            'billingState': row.registered_county,\n                            'billingPostalCode': row.registered_postcode,\n                            'billingCountry': row.registered_country,\n                            'latestAccountsDate': row.last_accounts_made_up_to,\n                            'filingType': row.last_accounts_type,\n                            'sic_codes': row.sic_code,\n                            'companyStatus': (row.company_status === 'active') ? \"Yes\": \"No\" ,\n                            'ownership': row.ownership,\n                            'LegalEntity': row.legal_entity_type,\n                            'LegalEntiyId': row.legal_entity_type_id,\n                            'regAddressRoad': row.registered_address_road,\n                            'regAddressPremises': row.registered_address_premises\n                            \n                            });\n                            break;\n                        }\n                    \n                    }\n                    \n                    console.log('cDtl'+cDtl);\n                    var CRNDetails = JSON.stringify(cDtl);\n                    console.log('CRNDetails::' , CRNDetails);\n                    console.log('idnvidual::' , idnvidual);\n                    console.log('corporate::' , corporate);\n                    console.log('officers::' , officers);\n                    \n                    var result =  sforce.apex.execute(\n                    'SAF_ContactsUtils',\n                    'updateContactsfromDB',\n                    {\n                      CRNDetail : CRNDetails,\n                      cIndividual : idnvidual,\n                      cCorporate : corporate,\n                      cOfficers : officers\n                    }\n                    );\n                    \n                    console.log(result);\n                    alert(result);\n               //});\n            \n            //});\n        \n        }else{\n             alert('customer not available in CL');\n        }\n    \n    }); </jsitem></javascript><css/><actionsequences uniqueid=\"sk-3qNL-243\"><actionsequence id=\"40e7acb0-bed8-478e-870c-673e25e48c61\" label=\"New Sequence\" uniqueid=\"sk-YIa-1054\"><actions/><description/></actionsequence></actionsequences></resources><styles><styleitem type=\"background\" bgtype=\"none\"/></styles><interactions/></skuidpage>","skuid__Layout2__c":null,"skuid__Layout3__c":null,"skuid__Layout4__c":null,"skuid__Layout5__c":null}]