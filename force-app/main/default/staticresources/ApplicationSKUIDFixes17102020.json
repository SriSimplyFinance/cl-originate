[{"attributes":{"type":"skuid__Page__c","url":"/services/data/v42.0/sobjects/skuid__Page__c/a8n0O000000bze2QAA"},"Id":"a8n0O000000bze2QAA","Name":"AnyLeaseProductApplicationForm","skuid__Type__c":"Desktop","skuid__UniqueId__c":"ngUi_AnyLeaseProductApplicationForm","skuid__Module__c":"ngUi","skuid__Composer_Settings__c":null,"skuid__MasterPage__c":null,"skuid__MasterPage__r":null,"skuid__IsMaster__c":false,"skuid__Layout__c":"<skuidpage personalizationmode=\"server\" showsidebar=\"false\" showheader=\"false\"><models><model id=\"GeneralLeaseCLProduct\" limit=\"1\" query=\"true\" createrowifnonefound=\"false\" type=\"\" sobject=\"clcommon__CL_Product__c\" datasource=\"salesforce\"><fields><field id=\"clcommon__Asset_Class__c\"/><field id=\"clcommon__Asset_Class__r.Name\"/><field id=\"Name\"/><field id=\"clcommon__Product_Name__c\"/></fields><conditions logic=\"\"><condition type=\"fieldvalue\" value=\"Commercial Secured\" enclosevalueinquotes=\"true\" field=\"clcommon__Asset_Class__r.Name\" operator=\"=\"/></conditions><actions/></model><model id=\"GeneralLeaseApplication\" limit=\"1\" query=\"true\" createrowifnonefound=\"false\" sobject=\"genesis__Applications__c\" datasource=\"salesforce\" doclone=\"\"><fields><field id=\"genesis__CL_Purpose__c\"/><field id=\"genesis__CL_Purpose__r.Name\"/><field id=\"genesis__Status__c\"/><field id=\"genesis__Expected_Close_Date__c\"/><field id=\"genesis__Maturity_Date__c\"/><field id=\"genesis__Participation_Date__c\"/><field id=\"genesis__Payment_Frequency__c\"/><field id=\"genesis__Financed_Amount__c\" overridemetadata=\"true\" ogdisplaytype=\"CURRENCY\" displaytype=\"CURRENCY\" precision=\"\" scale=\"\"/><field id=\"genesis__Product_Sub_Type__c\"/><field id=\"genesis__Sales_Division__c\"/><field id=\"genesis__Pricing_Method__c\"/><field id=\"genesis__Days_Convention__c\"/><field id=\"genesis__Expected_Start_Date__c\"/><field id=\"genesis__Company__c\"/><field id=\"genesis__Company__r.Name\"/><field id=\"genesis__Overall_Status__c\"/><field id=\"Support_Owner__c\"/><field id=\"Support_Owner__r.Name\"/><field id=\"genesis__Contact__c\"/><field id=\"genesis__Contact__r.Name\"/><field id=\"genesis__Account__c\"/><field id=\"genesis__Account__r.Name\"/><field id=\"genesis__Bank_Account_Number__c\"/><field id=\"genesis__Bank_Name__c\"/><field id=\"genesis_afford_rationale_purchase__c\"/><field id=\"genesis_Notes_To_SAF_Office_Staff__c\"/><field id=\"genesis_History_Background__c\"/><field id=\"genesis_Financials__c\"/><field id=\"genesis_Deal_Requirements_Pricing__c\"/><field id=\"genesis_Goods_Supplier__c\" overridemetadata=\"false\" ogdisplaytype=\"TEXTAREA\" displaytype=\"TEXTAREA\" defaultvaluetype=\"fieldvalue\"/><field id=\"genesis__Arrears__c\"/><field id=\"Owner.Username\"/><field id=\"Owner.Name\"/><field id=\"genesis_Summary_Recommendation__c\"/><field id=\"genesis__Term__c\" overridemetadata=\"true\" ogdisplaytype=\"DOUBLE\" displaytype=\"PICKLIST\" precision=\"\" scale=\"\" picklistsource=\"snippet\" defaultvaluetype=\"fieldvalue\" defaultValue=\"\" mergefield=\"Id\" enclosevalueinquotes=\"true\" snippet=\"Termdropdown\"><picklistentries/></field><field id=\"genesis__Expected_First_Payment_Date__c\" overridemetadata=\"false\" ogdisplaytype=\"DATE\" displaytype=\"DATE\" defaultvaluetype=\"fieldvalue\" defaultValue=\"\" enclosevalueinquotes=\"false\"/><field id=\"Id\"/><field id=\"Name\"/><field id=\"RecordTypeId\"/><field id=\"RecordType.Name\"/><field id=\"genesis__ID_Number__c\"/><field id=\"User__c\" overridemetadata=\"false\" ogdisplaytype=\"STRING\" displaytype=\"STRING\" defaultvaluetype=\"fieldvalue\" defaultValue=\"\"/><field id=\"genesis_ProposalOwner__c\" overridemetadata=\"false\" ogdisplaytype=\"REFERENCE\" displaytype=\"REFERENCE\" datasource=\"salesforce\" defaultvaluetype=\"fieldvalue\"><batchfields/></field><field id=\"genesis_ProposalOwner__r.Name\"/><field id=\"genesis_VAT__c\" overridemetadata=\"true\" ogdisplaytype=\"PERCENT\" displaytype=\"PERCENT\" precision=\"\" scale=\"\" readonly=\"false\"/><field id=\"genesis_VAT_Amount__c\" overridemetadata=\"true\" ogdisplaytype=\"CURRENCY\" displaytype=\"CURRENCY\" precision=\"\" scale=\"\"/><field id=\"genesis_Gross__c\" overridemetadata=\"true\" ogdisplaytype=\"CURRENCY\" displaytype=\"CURRENCY\" precision=\"\" scale=\"\"/><field id=\"VAT__c\"/><field id=\"genesis__Account__r.clcommon__Direct_Exposure__c\"/><field id=\"genesis__Account__r.clcommon__Direct_Proposed_Exposure__c\"/><field id=\"genesis__Account__r.clcommon__Indirect_Exposure__c\"/><field id=\"Introducer__c\"/><field id=\"Introducer1__c\"/><field id=\"Introducer1__r.Name\"/><field id=\"Total_Net_Asset_Cost__c\"/><field id=\"genesis__Net_Present_Value__c\" overridemetadata=\"true\" ogdisplaytype=\"DOUBLE\" displaytype=\"CURRENCY\" precision=\"\" scale=\"\"/><field id=\"genesis_Total_Deposit__c\"/><field id=\"genesis_Balance_Financed__c\"/><field id=\"genesis__Balloon_Payment__c\" overridemetadata=\"true\" ogdisplaytype=\"DOUBLE\" displaytype=\"CURRENCY\" precision=\"\" scale=\"\"/><field id=\"genesis_Repayment_Profile__c\"/><field id=\"geneisis_Document_Fee__c\"/><field id=\"genesis_Option_to_purchase_Fee__c\"/><field id=\"genesis_Yield__c\"/><field id=\"genesis_Vat_Deferral__c\"/><field id=\"genesis_VAT_Offset__c\" overridemetadata=\"false\" ogdisplaytype=\"PICKLIST\" displaytype=\"PICKLIST\" picklistsource=\"manual\" defaultvaluetype=\"fieldvalue\" defaultValue=\"3\"/><field id=\"genesis_Advance_Excluding_VAT_Deferral__c\" overridemetadata=\"true\" ogdisplaytype=\"CURRENCY\" displaytype=\"CURRENCY\" precision=\"\" scale=\"\"/><field id=\"genesis_Valuation__c\"/><field id=\"genesis_LTV__c\"/><field id=\"genesis_LTV_excluding_VAT_Deferral__c\"/><field id=\"genesis_Rationale__c\"/><field id=\"genesis_Guarantees__c\"/><field id=\"genesis_Proposed_Funder__c\"/><field id=\"genesis_Unapproved_Supplier__c\"/><field id=\"OwnerId\"/><field id=\"Term\" uionly=\"true\" displaytype=\"PICKLIST\" label=\"Term\" ogdisplaytype=\"TEXT\" picklistsource=\"snippet\" snippet=\"dropdown\" defaultvaluetype=\"fieldvalue\"/><field id=\"Customer funded exposure\" uionly=\"true\" displaytype=\"TEXT\" label=\"Customer funded exposure\"/><field id=\"Customer unfunded exposure\" uionly=\"true\" displaytype=\"TEXT\" label=\"Customer unfunded exposure\"/><field id=\"genesis_Proposed_Funder_Name__c\"/><field id=\"genesis_Customer_funded_exposure__c\"/><field id=\"genesis_Customer_unfunded_exposure__c\"/><field id=\"genesis_Linked_Exposure__c\"/><field id=\"genesis_Total_Exposure__c\"/><field id=\"TotalExposure\" uionly=\"true\" displaytype=\"FORMULA\" label=\"Total Exposure\" ogdisplaytype=\"TEXT\" readonly=\"true\" returntype=\"CURRENCY\" precision=\"9\" scale=\"2\"><formula>{{genesis_Customer_funded_exposure__c}}+{{genesis_Customer_unfunded_exposure__c}}+{{genesis_Linked_Exposure__c}}</formula></field><field id=\"BalanceFinanced\" uionly=\"true\" displaytype=\"FORMULA\" label=\"Balance Financed\" ogdisplaytype=\"TEXT\" precision=\"9\" scale=\"2\" readonly=\"true\" returntype=\"CURRENCY\"><formula>{{genesis_Gross__c}}-{{genesis_Total_Deposit__c}}</formula></field><field id=\"genesis__CL_Product__r.clcommon__Product_Name__c\"/><field id=\"genesis__Description__c\" overridemetadata=\"true\" ogdisplaytype=\"TEXTAREA\" displaytype=\"TEXTAREA\" length=\"255\" displayasrichtext=\"true\"/><field id=\"Urgent_Flag__c\"/><field id=\"Total_VAT__c\"/><field id=\"Total_Gross_Asset_Cost__c\"/><field id=\"SAF_VAT_UI\" uionly=\"true\" displaytype=\"FORMULA\" label=\"VAT Amount\" ogdisplaytype=\"TEXT\" readonly=\"true\" returntype=\"CURRENCY\" precision=\"9\" scale=\"2\"><formula>IF({{VAT__c}}=='Exempt',0.0,({{genesis__Financed_Amount__c}} * {{VAT__c}})/100)</formula></field><field id=\"SAF_Gross\" uionly=\"true\" displaytype=\"FORMULA\" label=\"Proposed Total Asset Cost\" ogdisplaytype=\"TEXT\" readonly=\"true\" returntype=\"CURRENCY\" precision=\"9\" scale=\"2\"><formula>VALUE({{genesis__Financed_Amount__c}})+VALUE({{VAT_Amount_New__c}})</formula></field><field id=\"SAF_LTV_UI\" uionly=\"true\" displaytype=\"FORMULA\" label=\"LTV\" ogdisplaytype=\"TEXT\" readonly=\"true\" returntype=\"PERCENT\" precision=\"9\" scale=\"2\"><formula>{{genesis_Balance_Finance__c}}/{{genesis_Valuation__c}}*100</formula></field><field id=\"SAF_LTV excluding VAT Deferral\" uionly=\"true\" displaytype=\"FORMULA\" label=\"LTV excluding VAT Deferral\" ogdisplaytype=\"TEXT\" readonly=\"true\" returntype=\"PERCENT\" precision=\"9\" scale=\"2\"><formula>{{SAF_Advance Excluding VAT Deferral_UI}}/{{genesis_Valuation__c}}*100</formula></field><field id=\"SAF_Advance Excluding VAT Deferral_UI\" uionly=\"true\" displaytype=\"FORMULA\" ogdisplaytype=\"TEXT\" readonly=\"true\" returntype=\"CURRENCY\" precision=\"9\" scale=\"2\"><formula>{{Balance_finance_Hirepurchase__c}}-{{genesis_Vat_Deferral__c}}</formula></field><field id=\"genesis__CL_Product__c\"/><field id=\"genesis__CL_Product__r.Name\"/><field id=\"Balance_finance_Hirepurchase__c\"/><field id=\"genesis_Maturity_date__c\"/><field id=\"Latest_Underwriter_Quality__c\"/><field id=\"Balance_Financed_less_Advance_Rental__c\"/><field id=\"genesis_Balance_Finance__c\"/><field id=\"VAT_Amount_New__c\" overridemetadata=\"true\" ogdisplaytype=\"STRING\" displaytype=\"CURRENCY\" precision=\"16\" scale=\"2\"/><field id=\"VAT_Deferral_Type__c\"/><field id=\"Period_of_Deferral_Months__c\"/><field id=\"Balance_Financed_less_Advance_Rental_1__c\"/><field id=\"Recommended_Underwriter__c\"/><field id=\"Recommended_Underwriter__r.Name\"/><field id=\"Security_Deposit__c\"/><field id=\"genesis_Sent_to_Funder__c\"/><field id=\"SAF_Equipment_Summary__c\"/><field id=\"Documentation_Fee__c\"/><field id=\"SAF_Insurance_Applicable__c\"/><field id=\"SAF_Contra__c\"/><field id=\"SAF_Contra_Agreement_number__c\" overridemetadata=\"false\" ogdisplaytype=\"TEXTAREA\" displaytype=\"REFERENCE\" datasource=\"salesforce\" targetobjects=\"cllease__Lease_Account__c\" defaultvaluetype=\"fieldvalue\" rel=\"Id\" keyfield=\"Id\"><batchfields/></field><field id=\"SAF_Contra_Reason__c\"/><field id=\"SAF_Contra_TerminationQuote__c\"/><field id=\"SAF_Priority__c\"/><field id=\"SAF_Contra_Agreement_numbers__c\"/><field id=\"SAF_Contra_Termination_Quote_numbers__c\"/><field id=\"Notes__c\"/><field id=\"Proposed_Broker_Commisson__c\"/><field id=\"genesis__Account__r.Previous_Arrears_Date__c\"/><field id=\"genesis__Account__r.Current_Arrears_Amount__c\"/><field id=\"genesis__Account__r.SAF_Exposure_Agreements__c\"/><field id=\"genesis__Account__r.SAF_Exposure_Application__c\"/><field id=\"CIFAS__c\"/><field id=\"Searches_Completed__c\"/><field id=\"Scheme__c\"/><field id=\"Proposed_Broker_Documentation_Fee__c\"/></fields><conditions><condition type=\"fieldvalue\" value=\"\" field=\"Id\" operator=\"=\" novaluebehavior=\"\" enclosevalueinquotes=\"true\" state=\"filterableoff\" inactive=\"true\" name=\"Id\"/></conditions><actions><action><actions><action type=\"save\"/></actions><events><event>models.saved</event><event>row.updated</event></events></action></actions></model><model id=\"contract\" limit=\"1\" query=\"true\" createrowifnonefound=\"false\" datasource=\"salesforce\" sobject=\"cllease__Lease_Account__c\" orderby=\"\"><fields><field id=\"Name\"/><field id=\"Id\"/><field id=\"cllease__application_number__c\"/><field id=\"cllease__Application_Date__c\"/></fields><conditions><condition type=\"blank\" value=\"null\" field=\"Application__c\" fieldtargetobjects=\"genesis__Applications__c\" operator=\"!=\" enclosevalueinquotes=\"false\"/><condition type=\"param\" value=\"id\" field=\"Application__r.Id\" operator=\"=\" enclosevalueinquotes=\"true\" novaluebehavior=\"noquery\"/></conditions><actions/></model><!--Fees Models Starts--><!--Fees models ends--><model id=\"MasterAlert\" limit=\"20\" query=\"true\" createrowifnonefound=\"false\" datasource=\"salesforce\" type=\"\" sobject=\"MasterAlert__c\"><fields><field id=\"Name\"/><field id=\"Display_Alert_Date__c\"/><field id=\"Display_Urgency__c\"/><field id=\"Display_Description__c\"/><field id=\"Keydata_to_show__c\"/></fields><conditions/><actions/></model><model id=\"CustomerAlert\" limit=\"20\" query=\"true\" createrowifnonefound=\"false\" datasource=\"salesforce\" type=\"\" sobject=\"Customer_Alert__c\" doclone=\"\"><fields><field id=\"Alert_Date__c\"/><field id=\"Name\"/><field id=\"Urgency__c\"/><field id=\"Description__c\"/><field id=\"Amount__c\"/><field id=\"MasterAlert__r.Name\"/><field id=\"Key_data_to_show_customer__c\"/></fields><conditions/><actions/></model><model id=\"contract1\" query=\"true\" createrowifnonefound=\"false\" datasource=\"salesforce\" sobject=\"cllease__Lease_Account__c\" orderby=\"\" limit=\"100\"><fields><field id=\"Name\"/><field id=\"Id\"/><field id=\"cllease__application_number__c\"/><field id=\"cllease__Application_Date__c\"/></fields><conditions><condition type=\"multiple\" value=\"\" field=\"Id\" operator=\"in\" mergefield=\"SAF_Contra_Agreement_number__c\" novaluebehavior=\"deactivate\" state=\"filterableoff\" inactive=\"true\" name=\"agreement\" enclosevalueinquotes=\"true\"><values><value/></values></condition></conditions><actions/></model><model id=\"TerminationQuote\" query=\"true\" createrowifnonefound=\"false\" datasource=\"salesforce\" sobject=\"cllease__Termination_Quote_Header__c\" limit=\"100\"><fields><field id=\"Name\"/><field id=\"Id\"/><field id=\"cllease__Contract__c\"/><field id=\"cllease__Contract__r.Name\"/></fields><conditions><condition type=\"multiple\" value=\"\" field=\"Id\" operator=\"in\" enclosevalueinquotes=\"true\" state=\"filterableoff\" inactive=\"true\" name=\"quote\"><values><value/></values></condition></conditions><actions/></model></models><components><grid uniqueid=\"sk-1dfo-3-885\"><divisions><division behavior=\"flex\" minwidth=\"100px\" ratio=\"1\" verticalalign=\"top\"><components><includepanel type=\"skuid\" uniqueid=\"sk-1brXhq-580\" pagename=\"ApplicationAlert\" module=\"\" querystring=\"?id={{$Model.GeneralLeaseApplication.data.0.Id}}\" cssclass=\"\"><renderconditions logictype=\"and\"><rendercondition fieldmodel=\"CustomerAlert\" sourcetype=\"rowproperty\" nosourcerowbehavior=\"deactivate\" sourceproperty=\"isSaved\" enclosevalueinquotes=\"false\"/><rendercondition type=\"blank\" operator=\"!=\" fieldmodel=\"CustomerAlert\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"deactivate\" field=\"Name\" fieldtargetobjects=\"Customer_Alert__c\" value=\"null\" enclosevalueinquotes=\"false\"/></renderconditions></includepanel></components></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/></styles><renderconditions logictype=\"and\"><rendercondition fieldmodel=\"CustomerAlert\" sourcetype=\"rowproperty\" nosourcerowbehavior=\"deactivate\" sourceproperty=\"isSaved\" enclosevalueinquotes=\"false\"/></renderconditions></grid><wrapper uniqueid=\"PurchaseCREApplicationDetails\"><components><basicfieldeditor showheader=\"true\" showsavecancel=\"false\" showerrorsinline=\"true\" model=\"GeneralLeaseApplication\" uniqueid=\"sk-oTs-891\" mode=\"read\"><columns><column width=\"100%\" uniqueid=\"sk-oTs-887\"><sections><section title=\"Exposures\" uniqueid=\"sk-oTs-888\" collapsible=\"no\" showheader=\"true\"><fields><field uniqueid=\"sk-pDQ-1035\" id=\"genesis__Account__r.Previous_Arrears_Date__c\" showhelp=\"true\"/><field uniqueid=\"sk-pDQ-1038\" id=\"genesis__Account__r.Current_Arrears_Amount__c\" showhelp=\"true\"><label>Current Arrears Amount</label></field><field uniqueid=\"sk-pDQ-1036\" id=\"genesis__Account__r.SAF_Exposure_Application__c\"><label>Approved Undrawn Exposure</label></field><field uniqueid=\"sk-pDQ-1037\" id=\"genesis__Account__r.SAF_Exposure_Agreements__c\"><label>Approved Live Exposure</label></field></fields></section></sections></column></columns></basicfieldeditor><basicfieldeditor showheader=\"true\" showsavecancel=\"false\" showerrorsinline=\"true\" model=\"GeneralLeaseApplication\" uniqueid=\"sk-1c1Apv-580\" mode=\"readonly\"><columns><column width=\"100%\"><sections><section title=\"Lease Information\" collapsible=\"no\"><fields><field id=\"genesis__Account__c\" readonly=\"false\" uniqueid=\"sk-2t9m-225\"><label>Customer</label></field><field uniqueid=\"sk-bH2-892\" id=\"genesis__Contact__c\"><filters><filter type=\"dependent\" operator=\"=\" field=\"AccountId\" fieldtargetobjects=\"Account\" value=\"\" enclosevalueinquotes=\"true\" depfield=\"genesis__Account__r.Id\"/></filters></field><field id=\"genesis__CL_Product__c\" valuehalign=\"\" type=\"\" optionsource=\"\" pagesize=\"5\" displaytemplate=\"{{clcommon__Product_Name__c}} {{clcommon__Asset_Class__c}}\" searchtemplate=\"{{clcommon__Product_Name__c}} {{clcommon__Asset_Class__c}}\" tokenizesearch=\"true\" cssclass=\"clProduct\" uniqueid=\"sk-2t9m-228\"><searchfields><searchfield query=\"true\" return=\"true\" show=\"true\" field=\"clcommon__Product_Name__c\" operator=\"contains\"/></searchfields><filters><filter type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"true\" field=\"clcommon__Class__c\" fieldtargetobjects=\"clcommon__CL_Product__c\" value=\"Commercial\"/></filters><label>Product Name</label><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions/></field><field id=\"Introducer1__c\" valuehalign=\"\" type=\"\" uniqueid=\"sk-2t9m-231\"><filters><filter type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"true\" field=\"Type\" fieldtargetobjects=\"Account\" value=\"Broker\"/></filters></field><field id=\"genesis_ProposalOwner__c\" uniqueid=\"sk-2t9m-234\"><label>Sales Owner</label><filters><filter type=\"multiple\" operator=\"in\" field=\"Profile.Name\" value=\"\" enclosevalueinquotes=\"true\"><values><value>SAF-Sales</value><value>SAF BDM</value><value>SAF-Sales2</value></values></filter></filters></field><field id=\"Support_Owner__c\" valuehalign=\"\" type=\"\" optionsource=\"\" pagesize=\"5\" uniqueid=\"sk-2t9m-237\"><label>Sales Support Owner</label><filters><filter type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"true\" field=\"Profile.Name\" value=\"SAF-SalesSupport\"/></filters><searchfields/></field><field id=\"Recommended_Underwriter__c\" uniqueid=\"sk-2t9m-240\"><filters><filter type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"true\" field=\"Profile.Name\" value=\"SAF-Underwriting\"/></filters></field><field id=\"genesis_Sent_to_Funder__c\" uniqueid=\"sk-2t9m-243\"/><field id=\"genesis__Description__c\" uniqueid=\"sk-2t9m-246\" required=\"false\"><label>Proposal Description</label></field><field id=\"genesis__Expected_Start_Date__c\" uniqueid=\"sk-2t9m-249\"><label>Proposed Drawdown date</label></field><field uniqueid=\"sk-2V2j-991\" id=\"SAF_Priority__c\"><label>RAG Status</label></field><field id=\"Urgent_Flag__c\" valuehalign=\"\" type=\"\" uniqueid=\"sk-2t9m-252\"/><field uniqueid=\"sk-2_6--933\" id=\"CIFAS__c\"/><field uniqueid=\"sk-dOo-966\" id=\"Scheme__c\"/><field uniqueid=\"sk-33Pd-943\" id=\"Searches_Completed__c\"/><field uniqueid=\"sk-2Bs5-910\" id=\"Notes__c\"><label>Notes</label></field><field id=\"genesis__Term__c\" decimalplaces=\"\" valuehalign=\"\" type=\"\" snippet=\"dropdown\" uniqueid=\"sk-2t9m-255\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions/></field><field id=\"genesis__Balloon_Payment__c\" decimalplaces=\"\" valuehalign=\"\" type=\"\" cssclass=\"decimalOnly\" uniqueid=\"sk-2t9m-297\"/><field id=\"genesis__Financed_Amount__c\" cssclass=\"decimalOnly\" uniqueid=\"sk-2t9m-258\"><label>Proposed Net Asset Cost</label></field><field id=\"VAT_Amount_New__c\" valuehalign=\"\" type=\"\" uniqueid=\"sk-2t9m-261\"><label>VAT Amount</label></field><field id=\"VAT_Deferral_Type__c\" valuehalign=\"\" type=\"\" uniqueid=\"sk-2t9m-264\"/><field id=\"Period_of_Deferral_Months__c\" valuehalign=\"\" type=\"\" uniqueid=\"sk-2t9m-267\"><label>Period of Deferral</label></field><field id=\"SAF_Gross\" uniqueid=\"sk-2t9m-270\"/><field id=\"Security_Deposit__c\" decimalplaces=\"\" valuehalign=\"\" type=\"\" uniqueid=\"sk-2t9m-273\"><label>Security Deposit / Advanced Rental</label></field><field id=\"Balance_finance_Hirepurchase__c\" decimalplaces=\"\" valuehalign=\"\" type=\"\" uniqueid=\"sk-2t9m-276\"><label>Balance Financed</label></field><field id=\"Balance_Financed_less_Advance_Rental_1__c\" decimalplaces=\"\" valuehalign=\"\" type=\"\" uniqueid=\"sk-2t9m-279\"><label>Balance Financed less Advance Rental</label></field><field id=\"SAF_Advance Excluding VAT Deferral_UI\" decimalplaces=\"\" valuehalign=\"\" type=\"\" uniqueid=\"sk-2t9m-282\"><label>Advance Excluding VAT Deferral</label></field><field id=\"genesis_Option_to_purchase_Fee__c\" decimalplaces=\"\" valuehalign=\"\" type=\"\" uniqueid=\"sk-2t9m-285\"/><field id=\"Documentation_Fee__c\" decimalplaces=\"\" valuehalign=\"\" type=\"\" uniqueid=\"sk-2t9m-288\"><label>Doc Fee</label></field><field id=\"genesis_Yield__c\" decimalplaces=\"\" valuehalign=\"\" type=\"\" uniqueid=\"sk-2t9m-291\"/><field uniqueid=\"sk-1b7R-930\" id=\"Proposed_Broker_Commisson__c\"/><field uniqueid=\"sk-383G-958\" id=\"Proposed_Broker_Documentation_Fee__c\"/><field id=\"genesis__Payment_Frequency__c\" uniqueid=\"sk-2t9m-294\"><label>Payments</label></field><field uniqueid=\"sk-2t9t-913\" id=\"SAF_Contra__c\"/><field uniqueid=\"sk-2tAC-930\" type=\"COMBO\" editmodebehavior=\"custompopup\"><label>Contra Agreement</label><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"><rendercondition type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"false\" fieldmodel=\"GeneralLeaseApplication\" sourcetype=\"fieldvalue\" field=\"SAF_Contra__c\" fieldtargetobjects=\"genesis__Applications__c\" value=\"true\"/></renderconditions><enableconditions/><editmodepopup title=\"Contra Agreement\" width=\"450\"><components><skootable showconditions=\"true\" showsavecancel=\"false\" showerrorsinline=\"false\" searchmethod=\"server\" searchbox=\"false\" showexportbuttons=\"false\" hideheader=\"false\" hidefooter=\"false\" pagesize=\"10\" alwaysresetpagination=\"false\" createrecords=\"false\" model=\"contract1\" mode=\"read\" allowcolumnreordering=\"false\" responsive=\"true\" uniqueid=\"sk-2yJh-969\" instantfilters=\"false\" emptysearchbehavior=\"query\"><fields><field id=\"Name\" hideable=\"true\" uniqueid=\"fi-2yK2-1076\"/></fields><rowactions/><massactions usefirstitemasdefault=\"true\"/><views><view type=\"standard\"/></views><searchfields/><renderconditions logictype=\"and\"/><conditions/></skootable></components></editmodepopup><template>&lt;a href=\"javascript:ContractTablepopup();\"&gt;#Agreement&lt;/a&gt;\n</template></field><field uniqueid=\"sk-2_bF-904\" id=\"SAF_Contra_Reason__c\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"><rendercondition type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"false\" fieldmodel=\"GeneralLeaseApplication\" sourcetype=\"fieldvalue\" field=\"SAF_Contra__c\" fieldtargetobjects=\"genesis__Applications__c\" value=\"true\"/></renderconditions><enableconditions/></field><field uniqueid=\"sk-31rV-1401\" type=\"COMBO\" editmodebehavior=\"autopopup\"><label>Termination Quote</label><template>&lt;a href=\"javascript:QuoteTablepopup();\"&gt;#Termination Quote&lt;/a&gt;</template><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"><rendercondition type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"false\" fieldmodel=\"GeneralLeaseApplication\" sourcetype=\"fieldvalue\" field=\"SAF_Contra__c\" fieldtargetobjects=\"genesis__Applications__c\" value=\"true\"/></renderconditions><enableconditions/></field><field id=\"genesis_History_Background__c\" displayrows=\"5\" maxdisplaycharacters=\"\" uniqueid=\"sk-2t9m-300\"><label>Background/Proposed Deal</label></field><field id=\"SAF_Equipment_Summary__c\" valuehalign=\"\" type=\"\" uniqueid=\"sk-2t9m-303\"><label>Equipment Summary</label></field><field id=\"genesis_Rationale__c\" valuehalign=\"\" type=\"\" displayrows=\"5\" uniqueid=\"sk-2t9m-306\"/><field id=\"genesis_Financials__c\" valuehalign=\"\" type=\"\" displayrows=\"5\" maxdisplaycharacters=\"\" uniqueid=\"sk-2t9m-309\"/><field id=\"genesis_afford_rationale_purchase__c\" valuehalign=\"\" type=\"\" displayrows=\"5\" maxdisplaycharacters=\"\" uniqueid=\"sk-2t9m-312\"><label>Affordability</label></field><field id=\"genesis_Proposed_Funder__c\" uniqueid=\"sk-2t9m-315\"/><field id=\"genesis_Proposed_Funder_Name__c\" uniqueid=\"sk-2t9m-318\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions/></field><field id=\"genesis_Unapproved_Supplier__c\" showhelp=\"true\" valuehalign=\"\" type=\"\" uniqueid=\"sk-2t9m-321\"/></fields></section></sections></column></columns></basicfieldeditor><basicfieldeditor showheader=\"true\" showsavecancel=\"false\" showerrorsinline=\"true\" model=\"contract\" uniqueid=\"sk-2rTvxL-206\" mode=\"readonly\" layout=\"\"><columns layoutmode=\"fixed\"><column width=\"100%\"><sections><section title=\"Agreement Information\" collapsible=\"no\"><fields><field id=\"Name\" valuehalign=\"\" type=\"\" uniqueid=\"sk-2t9m-333\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions logictype=\"and\"/></field><field id=\"cllease__application_number__c\" valuehalign=\"\" type=\"\" uniqueid=\"sk-2t9m-336\"/><field id=\"cllease__Application_Date__c\" showhelp=\"true\" valuehalign=\"\" type=\"\" cssclass=\"datepickerOnly\" uniqueid=\"sk-2t9m-339\"/></fields><renderconditions logictype=\"and\"/></section></sections></column></columns><renderconditions logictype=\"and\"/></basicfieldeditor></components><!--For Fees Section Starts--><components/><!--For Fees section Ends--><styles><styleitem type=\"background\" bgtype=\"none\"/><styleitem type=\"border\"/><styleitem type=\"size\"/></styles><renderconditions logictype=\"and\"/></wrapper></components><resources><labels/><javascript><jsitem location=\"inline\" name=\"loadModels\" cachelocation=\"false\" url=\"\">(function(skuid){\n\tvar $ = skuid.$;\n\t$(document.body).one('pageload',function(){\n\t     // Allow Number Only Char\n\t        $(document).on( \"keypress\",\".numberOnly input\", function (e) { \n    \t            var allowedChars = '0123456789.';\n                    function contains(stringValue, charValue) {\n                        return stringValue.indexOf(charValue) &gt; -1;\n                    }\n                    var invalidKey = e.key.length === 1 &amp;&amp; !contains(allowedChars, e.key)\n                            || e.key === '.';\n                    invalidKey &amp;&amp; e.preventDefault();\n            });\n            \n           // Allow Decimal Only including single dot\n\t        $(document).on( \"keypress\",\".decimalOnly input\", function (e) { \n    \t            var allowedChars = '0123456789.';\n                    function contains(stringValue, charValue) {\n                        return stringValue.indexOf(charValue) &gt; -1;\n                    }\n                    var invalidKey = e.key.length === 1 &amp;&amp; !contains(allowedChars, e.key)\n                            || e.key === '.' &amp;&amp; contains(e.target.value, '.');\n                    invalidKey &amp;&amp; e.preventDefault();\n            });\n    \t \n    \t // Prevent Paste  \n    \t  $(document).on( \"paste\",\".numberOnly input\", function (evt) { \n    \t        evt.preventDefault();\n    \t    });\n    \t    \n    \t    $(document).on( \"keydown\",\".datepickerOnly input\", function (evt) { \n    \t        evt.preventDefault();\n    \t    });\n    \t    \n    \t    \n\tvar paramId = skuid.page.params.id;\n\t    var pageName = skuid.page.params.page;\n\t    if(pageName &amp;&amp; pageName == 'AddDealsToPackage'){\n\t        var newRow = skuid.model.getModel('GeneralLeaseApplication').createRow({});\n\t    } else{\n    \t    if(paramId){\n        \t    queryApplication(paramId);\n        \t}else{\n        \t    var newRow = skuid.model.getModel('GeneralLeaseApplication').createRow({});\n        \t}\n\t    }\n\t});\n})(skuid);\n\nfunction queryApplication(id){\n    var applicationModel = skuid.model.getModel('GeneralLeaseApplication');\n    var appIdCondition = applicationModel.getConditionByName('AppId');\n    applicationModel.setCondition(appIdCondition,id);\n    \n    var model_one = skuid.model.getModel('GeneralLeaseApplication');\n\t\t\n\t\t//alert(model_one.data[0].SAF_Contra_Agreement_number__c);\n\t\t\n\t\tif(model_one.data[0].SAF_Contra_Agreement_number__c != undefined &amp;&amp; model_one.data[0].SAF_Contra_Agreement_number__c != null)\n\t\t{\n        \tvar model_two = skuid.model.getModel('contract1');\n            model_two.setCondition(model_two.getConditionByName(\"agreement\"), model_one.data[0].SAF_Contra_Agreement_number__c.split(\";\"));\n            model_two.activateCondition(model_two.getConditionByName(\"agreement\"));\n            model_two.updateData(); \n\t\t}\n        \n        //quote // TerminationQuote\n        if(model_one.data[0].SAF_Contra_TerminationQuote__c != undefined &amp;&amp; model_one.data[0].SAF_Contra_TerminationQuote__c != null)\n\t\t{\n            var model_three = skuid.model.getModel('TerminationQuote');\n            model_three.setCondition(model_three.getConditionByName(\"quote\"), model_one.data[0].SAF_Contra_TerminationQuote__c.split(\";\"));\n            model_three.activateCondition(model_three.getConditionByName(\"quote\"));\n            model_three.updateData(); \n            \n            /*var atmt = model_three.data;\n            var i=0;\n            alert(atmt.length);\n            for(i=0; i&lt;atmt.length;i++)\n            {\n                alert(model_three.data[i].id+' - Contract: '+ model_three.data[i].cllease__Contract__r.Name);\n            }*/\n            var model_four = skuid.model.getModel('ContraAttachment');\n            model_four.setCondition(model_four.getConditionByName(\"parentid\"), model_one.data[0].SAF_Contra_Agreement_number__c.split(\";\"));\n            model_four.activateCondition(model_four.getConditionByName(\"parentid\"));\n            model_four.updateData(); \n\t\t}\n    \n    var model_one = skuid.model.getModel('GeneralLeaseApplication');\n    //alert('Quote: '+model_one.data[0].SAF_Contra_TerminationQuote__c);\n    skuid.model.updateData([applicationModel],function(){});\n}\n\nfunction ContractTablepopup(){\n    var model_one = skuid.model.getModel('GeneralLeaseApplication');\n    if(model_one.data[0].SAF_Contra_Agreement_number__c != undefined &amp;&amp; model_one.data[0].SAF_Contra_Agreement_number__c != null)\n    {\n        $xml = skuid.utils.makeXMLDoc;\n        var popupXMLString = \n    \n        '&lt;popup width=\"50%\" title=\"Contract\"&gt;'\n            + '&lt;components&gt;'\n                +'&lt;skootable showconditions=\"true\" showsavecancel=\"false\" showerrorsinline=\"true\" searchmethod=\"server\" searchbox=\"false\" showexportbuttons=\"false\" hideheader=\"false\" hidefooter=\"false\" pagesize=\"10\" alwaysresetpagination=\"false\" createrecords=\"false\" model=\"contract1\" buttonposition=\"\" mode=\"readonly\"&gt;'\n                        +'&lt;fields&gt;'\n                            +'&lt;field id=\"Name\"/&gt;'\n                        +'&lt;/fields&gt;'\n                        +'&lt;rowactions/&gt;'\n                        +'&lt;massactions usefirstitemasdefault=\"true\"/&gt;'\n                        +'&lt;views&gt;'\n                            +'&lt;view type=\"standard\"/&gt;'\n                        +'&lt;/views&gt;'\n                        +'&lt;searchfields/&gt;'\n                        +'&lt;renderconditions logictype=\"and\"/&gt;'\n                    +'&lt;/skootable&gt;'\n            + '&lt;/components&gt;'\n        + '&lt;/popup&gt;';\n        //+'&lt;javascript&gt;         &lt;jsitem location=\"inlinesnippet\" name=\"ContractRequest\" cachelocation=\"false\" url=\"\"&gt;var $ = skuid.$;';\n    \n        var popupXML = $xml(popupXMLString);\n        \n        var context = {};\n        \n        var popup = skuid.utils.createPopupFromPopupXML(popupXML, context);\n    }\n    else\n    {\n        alert('No Agreements are linked');\n    }\n\n}\n\nfunction QuoteTablepopup(){\n    var model_one = skuid.model.getModel('GeneralLeaseApplication');\n    if(model_one.data[0].SAF_Contra_TerminationQuote__c != undefined &amp;&amp; model_one.data[0].SAF_Contra_TerminationQuote__c != null)\n    {\n        $xml = skuid.utils.makeXMLDoc;\n        var popupXMLString = \n    \n        '&lt;popup width=\"90%\" title=\"Termination Quote\"&gt;'\n            + '&lt;components&gt;'\n                +'&lt;skootable showconditions=\"true\" showsavecancel=\"false\" showerrorsinline=\"true\" searchmethod=\"server\" searchbox=\"false\" showexportbuttons=\"false\" hideheader=\"false\" hidefooter=\"false\" pagesize=\"10\" alwaysresetpagination=\"false\" createrecords=\"false\" model=\"TerminationQuote\" buttonposition=\"\" mode=\"readonly\"&gt;'\n                        +'&lt;fields&gt;'\n                            +'&lt;field id=\"Name\"/&gt;'\n                            +'&lt;field id=\"cllease__Contract__c\"/&gt;'\n                        +'&lt;/fields&gt;'\n                        +'&lt;rowactions/&gt;'\n                        +'&lt;massactions usefirstitemasdefault=\"true\"/&gt;'\n                        +'&lt;views&gt;'\n                            +'&lt;view type=\"standard\"/&gt;'\n                        +'&lt;/views&gt;'\n                        +'&lt;searchfields/&gt;'\n                        +'&lt;renderconditions logictype=\"and\"/&gt;'\n                    +'&lt;/skootable&gt;'\n            + '&lt;/components&gt;'\n        + '&lt;/popup&gt;';\n        //+'&lt;javascript&gt;         &lt;jsitem location=\"inlinesnippet\" name=\"ContractRequest\" cachelocation=\"false\" url=\"\"&gt;var $ = skuid.$;';\n    \n        var popupXML = $xml(popupXMLString);\n        \n        var context = {};\n        \n        var popup = skuid.utils.createPopupFromPopupXML(popupXML, context);\n    }\n    else\n    {\n        alert('No Termination Quotes are linked');\n    }\n}\n\n// Code for Attachment of Termination quote requirement.\n/*function AttachmentTablepopup(){\n    var model_one = skuid.model.getModel('GeneralLeaseApplication');\n    if(model_one.data[0].SAF_Contra_TerminationQuote__c != undefined &amp;&amp; model_one.data[0].SAF_Contra_TerminationQuote__c != null)\n    {\n        alert(model_one.data[0].SAF_Contra_TerminationQuote__c);\n        $xml = skuid.utils.makeXMLDoc;\n        var popupXMLString = \n    \n        '&lt;popup width=\"90%\" title=\"Termination Quote\"&gt;'\n            + '&lt;components&gt;'\n                +'&lt;includepanel type=\"skuid\" uniqueid=\"sk-33YJ-2633\" querystring=\"?id='+ model_one.data[0].SAF_Contra_TerminationQuote__c+'\" pagename=\"uploadGeneratedAgreements\"/&gt;'\n            + '&lt;/components&gt;'\n        + '&lt;/popup&gt;';\n        //+'&lt;javascript&gt;         &lt;jsitem location=\"inlinesnippet\" name=\"ContractRequest\" cachelocation=\"false\" url=\"\"&gt;var $ = skuid.$;';\n    \n        var popupXML = $xml(popupXMLString);\n        \n        var context = {};\n        \n        var popup = skuid.utils.createPopupFromPopupXML(popupXML, context);\n    }\n    else\n    {\n        alert('No Termination Quotes are linked');\n    }\n}*/</jsitem><jsitem location=\"inlinesnippet\" name=\"fieldsRenderMode\" cachelocation=\"false\">var field = arguments[0],\n    value = arguments[1];\nvar renderMode = skuid.page.params.mode;\nif(renderMode &amp;&amp; renderMode == \"read\"){\n    skuid.ui.fieldRenderers[field.metadata.displaytype].read(field, value);\n}else{\n    skuid.ui.fieldRenderers[field.metadata.displaytype].edit(field, value);\n}\n</jsitem><jsitem location=\"inlinesnippet\" name=\"getIncludedPageData\" cachelocation=\"false\" url=\"\">var params = arguments[0],\n\t$ = skuid.$;\nvar productRow = skuid.model.getModel('GeneralLeaseCLProduct').getFirstRow();\nvar applicationModel = skuid.model.getModel('GeneralLeaseApplication');\nif(applicationModel &amp;&amp; applicationModel.data &amp;&amp; applicationModel.data[0] &amp;&amp; productRow){\n    applicationModel.data[0].genesis__CL_Product__c = productRow.Id;\n}\nvar result = {\n    'genesis__Applications__c' : applicationModel,\n};\n\nreturn result;\n\n</jsitem><jsitem location=\"inlinesnippet\" name=\"LoadQueueUsers\" cachelocation=\"false\" url=\"\">var field = arguments[0],\n$ = skuid.$;\nvar productRow = skuid.model.getModel('GeneralLeaseCLProduct').getFirstRow();\nvar applicationModel = skuid.model.getModel('GeneralLeaseApplication');\n\nvar appModel = skuid.model.getModel('CommonApplicationModel');\nvar appRow = appModel.data[0];\nvar ret = sforce.apex.execute(\"LoaduserTeam\",\"loadQueue\",{AppId:appRow.Id});\nif (ret!==null)\n{\nvar appGnerealRow = applicationModel.getFirstRow();\n//applicationModel.updateRow(appGnerealRow,Team_users,ret);\n//applicationModel.Save();\nvar pikVal = [];\n\nfor(var a=0;a&lt;ret.length;a++){\n    pikVal.push({label: ret[a], value: ret[a]});\n   //       picklistEntries.push({ value:ret[a].Name , label:ret[a].Name, defaultValue: false, active: true  });\n    }\n    console.log('========='+pikVal);\n    return pikVal;\n}\n//skuid.ui.fieldRenderers[field.metadata.displaytype][field.mode](field,value);</jsitem><jsitem location=\"inlinesnippet\" name=\"Termdropdown\" cachelocation=\"false\">var params = arguments[0],\n$ = skuid.$;\nvar pikVal = [];\n\n    for(var a=0;a&lt;84;a++)\n    {\n        pikVal.push({label: a+1, value: a+1});\n    }\n    return pikVal;</jsitem></javascript><css/><actionsequences uniqueid=\"sk-2t9s-905\"/></resources><styles><styleitem type=\"background\" bgtype=\"none\"/></styles><interactions/></skuidpage>","skuid__Layout2__c":null,"skuid__Layout3__c":null,"skuid__Layout4__c":null,"skuid__Layout5__c":null},{"attributes":{"type":"skuid__Page__c","url":"/services/data/v42.0/sobjects/skuid__Page__c/a8n0O000000bze5QAA"},"Id":"a8n0O000000bze5QAA","Name":"ApplicationForm","skuid__Type__c":"Desktop","skuid__UniqueId__c":"ngUi_ApplicationForm","skuid__Module__c":"ngUi","skuid__Composer_Settings__c":null,"skuid__MasterPage__c":null,"skuid__MasterPage__r":null,"skuid__IsMaster__c":false,"skuid__Layout__c":"<skuidpage personalizationmode=\"server\" showsidebar=\"false\" showheader=\"false\"><models><model id=\"OrgParameter\" limit=\"1\" query=\"true\" createrowifnonefound=\"false\" type=\"\" sobject=\"genesis__Org_Parameters__c\" doclone=\"\" datasource=\"salesforce\"><fields><field id=\"genesis__Use_Contact_as_Account__c\"/><field id=\"RenderContact\" uionly=\"true\" displaytype=\"BOOLEAN\" label=\"RenderContact\" readonly=\"true\" defaultValue=\"true\"/><field id=\"RenderAccount\" uionly=\"true\" displaytype=\"BOOLEAN\" label=\"RenderAccount\" readonly=\"true\" defaultValue=\"true\"/></fields><conditions/><actions/></model><model id=\"CreateApplicationActionModel\" limit=\"\" query=\"false\" createrowifnonefound=\"true\" type=\"\" sobject=\"genesis__Action__c\" datasource=\"salesforce\" doclone=\"\"><fields><field id=\"genesis__New_Borrower__c\"/><field id=\"genesis__Existing_Application__c\"/></fields><conditions/><actions><action><actions><action type=\"updateRow\" fieldmodel=\"CommonApplicationModel\" field=\"genesis__Contact__c\" enclosevalueinquotes=\"true\" affectedrows=\"context\"/><action type=\"custom\" snippet=\"fetchContactData\"/></actions><events><event>row.updated</event></events><fields><field>genesis__New_Borrower__c</field></fields></action><action><actions><action type=\"updateRow\" fieldmodel=\"CommonApplicationModel\" field=\"genesis__Account__c\" enclosevalueinquotes=\"true\" affectedrows=\"context\"/><action type=\"custom\" snippet=\"fetchAccountData\"/></actions><events><event>row.updated</event></events><fields><field>genesis__Existing_Application__c</field></fields></action></actions></model><model id=\"CommonApplicationModel\" limit=\"\" query=\"false\" createrowifnonefound=\"false\" sobject=\"genesis__Applications__c\" datasource=\"salesforce\"><fields><field id=\"Id\"/><field id=\"Name\"/><field id=\"RecordType.Name\"/><field id=\"RecordTypeId\"/><field id=\"genesis__CL_Product__c\"/><field id=\"genesis__CL_Product__r.Name\"/><field id=\"genesis__Account__c\"/><field id=\"genesis__Contact__c\"/><field id=\"genesis__Asset_Class__c\"/><field id=\"genesis__CL_Product__r.clcommon__Product_Name__c\"/><field id=\"genesis__Parent_Application__c\"/><field id=\"genesis__Parent_Application__r.Name\"/><field id=\"genesis__Account__r.clcommon__Legal_Entity_Type__c\"/><field id=\"genesis__Account__r.clcommon__Legal_Entity_Type__r.Name\"/><field id=\"genesis__Account__r.Name\"/><field id=\"genesis__Contact__r.Name\"/><field id=\"OwnerId\"/><field id=\"Owner.Name\"/><field id=\"genesis__Product_Sub_Type__c\"/><field id=\"genesis__Product_Type__c\"/><field id=\"genesis_afford_rationale_purchase__c\"/><field id=\"genesis__Bank_Name__c\"/><field id=\"genesis__Status__c\"/><field id=\"genesis__Sales_Division__c\"/><field id=\"genesis__Description__c\"/><field id=\"genesis_ProposalOwner__c\"/><field id=\"genesis_ProposalOwner__r.Name\"/><field id=\"Support_Owner__c\"/><field id=\"Support_Owner__r.Name\"/><field id=\"genesis__Expected_Start_Date__c\"/><field id=\"Urgent_Flag__c\"/><field id=\"Introducer1__c\"/><field id=\"Introducer1__r.Name\"/><field id=\"Introducer__c\"/><field id=\"Introducer1__r.MasterRecordId\"/><field id=\"Introducer1__r.MasterRecord.Name\"/><field id=\"Introducer1__r.Id\"/><field id=\"genesis_Customer_funded_exposure__c\"/><field id=\"genesis_Customer_unfunded_exposure__c\"/><field id=\"genesis__Account__r.Pay_Current_Arrears__c\"/><field id=\"genesis__Account__r.Pay_Previous_Arrears__c\"/><field id=\"genesis_Unapproved_Supplier__c\"/><field id=\"genesis__Account__r.SAF_Exposure_Agreements__c\"/><field id=\"genesis__Account__r.SAF_Exposure_Application__c\"/><field id=\"SAF_PEP_Status__c\"/></fields><conditions><condition type=\"fieldvalue\" value=\"id\" enclosevalueinquotes=\"true\" field=\"Id\" operator=\"=\" state=\"filterableoff\" inactive=\"true\" name=\"AppId\"/></conditions><actions><action><actions><action type=\"setCondition\" model=\"SelectedProduct\" condition=\"Id\" value=\"{{genesis__CL_Product__c}}\"/><action type=\"requeryModel\" model=\"SelectedProduct\" behavior=\"standard\"/><action type=\"updateRow\" fieldmodel=\"SelectedProduct\" field=\"RenderAccount\" enclosevalueinquotes=\"false\" value=\"true\" affectedrows=\"context\"/><action type=\"updateRow\" fieldmodel=\"SelectedProduct\" field=\"RenderContact\" enclosevalueinquotes=\"false\" value=\"true\" affectedrows=\"context\"/></actions><events><event>row.updated</event></events><fields><field>genesis__CL_Product__c</field></fields></action><action><actions><action type=\"custom\" snippet=\"fetchContactData\"/></actions><events><event>row.updated</event></events><fields><field>genesis__Contact__c</field></fields></action><action><actions><action type=\"custom\" snippet=\"fetchAccountData\"/></actions><events><event>row.updated</event></events><fields><field>genesis__Account__c</field></fields></action></actions></model><model id=\"ApplicationRecordType\" limit=\"\" query=\"false\" createrowifnonefound=\"false\" type=\"\" sobject=\"RecordType\" datasource=\"salesforce\"><fields><field id=\"Name\"/><field id=\"Id\"/><field id=\"DeveloperName\"/></fields><conditions><condition type=\"param\" value=\"RecordType\" field=\"Id\" operator=\"=\" enclosevalueinquotes=\"true\" novaluebehavior=\"\" state=\"filterableoff\" inactive=\"true\" name=\"Id\"/></conditions><actions/></model><model id=\"SelectedProduct\" limit=\"1\" query=\"false\" createrowifnonefound=\"false\" type=\"\" sobject=\"clcommon__CL_Product__c\" doclone=\"\" datasource=\"salesforce\"><fields><field id=\"clcommon__Asset_Class__c\"/><field id=\"clcommon__Asset_Class__r.Name\"/><field id=\"clcommon__Product_Name__c\"/><field id=\"Id\"/><field id=\"genesis__Allow_SubLimits__c\"/><field id=\"genesis__Use_As_Package_Product__c\"/></fields><conditions><condition type=\"fieldvalue\" value=\"\" enclosevalueinquotes=\"true\" field=\"Id\" operator=\"=\" state=\"filterableoff\" inactive=\"true\" name=\"Id\"/></conditions><actions/></model><model id=\"CommonAccountModel\" limit=\"1\" query=\"false\" createrowifnonefound=\"false\" type=\"\" sobject=\"Account\" datasource=\"salesforce\"><fields><field id=\"Name\"/><field id=\"Phone\"/><field id=\"Fax\"/><field id=\"clcommon__Legal_Entity_Type__c\"/><field id=\"clcommon__Legal_Entity_Type__r.Name\"/><field id=\"BillingCity\"/><field id=\"BillingCountry\"/><field id=\"BillingStreet\"/><field id=\"BillingState\"/><field id=\"BillingPostalCode\"/><field id=\"ShippingCity\"/><field id=\"ShippingCountry\"/><field id=\"ShippingState\"/><field id=\"ShippingStreet\"/><field id=\"ShippingPostalCode\"/><field id=\"MasterRecordId\"/><field id=\"MasterRecord.Name\"/><field id=\"genesis__Business_Information__c\"/><field id=\"genesis__Business_Information__r.Name\"/></fields><conditions><condition type=\"fieldvalue\" value=\"\" field=\"Id\" state=\"filterableoff\" inactive=\"true\" name=\"CommonAccId\" operator=\"=\" mergefield=\"genesis__Account__c\" novaluebehavior=\"deactivate\" enclosevalueinquotes=\"true\"/></conditions><actions/></model><model id=\"CommonContactModel\" limit=\"1\" query=\"false\" createrowifnonefound=\"true\" type=\"\" sobject=\"Contact\" datasource=\"salesforce\"><fields><field id=\"FirstName\"/><field id=\"LastName\"/><field id=\"Birthdate\"/><field id=\"Email\"/><field id=\"MobilePhone\"/><field id=\"clcommon__Legal_Entity_Type__c\"/><field id=\"clcommon__Legal_Entity_Type__r.Name\"/><field id=\"genesis__SSN__c\"/><field id=\"OtherPhone\"/><field id=\"MailingStreet\"/><field id=\"OtherStreet\"/><field id=\"MailingCity\"/><field id=\"OtherCity\"/><field id=\"MailingState\"/><field id=\"OtherState\"/><field id=\"MailingCountry\"/><field id=\"OtherCountry\"/><field id=\"MailingPostalCode\"/><field id=\"OtherPostalCode\"/></fields><conditions><condition type=\"fieldvalue\" value=\"\" enclosevalueinquotes=\"true\" field=\"Id\" operator=\"=\" state=\"filterableoff\" inactive=\"true\" name=\"CommonContactId\"/><condition type=\"fieldvalue\" value=\"\" enclosevalueinquotes=\"true\" field=\"AccountId\" operator=\"=\" state=\"filterableoff\" inactive=\"true\" name=\"AccountId\"/></conditions><actions/></model><model id=\"CommonBusinessInforModel\" limit=\"\" query=\"false\" createrowifnonefound=\"true\" type=\"\" sobject=\"genesis__Business_Information__c\" datasource=\"salesforce\"><fields><field id=\"genesis__NAICS_Code__c\"/><field id=\"genesis__NAICS_Description__c\"/><field id=\"genesis__Business_Legal_Name__c\"/><field id=\"genesis__DBA_Name__c\"/><field id=\"genesis__Tax_ID__c\"/><field id=\"genesis__Date_Business_Established__c\"/><field id=\"genesis__Organization_ID_Number__c\"/><field id=\"genesis__Non_Profit_Organization__c\"/><field id=\"genesis__State_of_Incorporation__c\"/><field id=\"genesis__Required_Number_of_Signers__c\"/></fields><conditions><condition type=\"modelmerge\" value=\"\" field=\"Id\" operator=\"=\" state=\"filterableoff\" inactive=\"true\" name=\"BusinessInfoId\" model=\"CommonAccountModel\" enclosevalueinquotes=\"true\" mergefield=\"Id\" novaluebehavior=\"deactivate\"/></conditions><actions/></model><model id=\"AppDocumentCategory\" limit=\"20\" query=\"true\" createrowifnonefound=\"false\" datasource=\"salesforce\" type=\"\" sobject=\"genesis__Application_Document_Category__c\"><fields/><conditions/><actions/></model><model id=\"RDParty\" limit=\"20\" query=\"true\" createrowifnonefound=\"false\" datasource=\"salesforce\" type=\"\" sobject=\"clcommon__Party__c\" orderby=\"Name DESC\"><fields><field id=\"clcommon__Account__c\"/><field id=\"clcommon__Account__r.Name\"/><field id=\"genesis__Application__c\"/><field id=\"genesis__Application__r.Name\"/><field id=\"clcommon__Contact__c\"/><field id=\"clcommon__Contact__r.Name\"/><field id=\"collect__CL_Contract__c\"/><field id=\"collect__CL_Contract__r.Name\"/><field id=\"collect__Contract__c\"/><field id=\"collect__Contract__r.Name\"/><field id=\"genesis__Credit_Report__c\"/><field id=\"genesis__Credit_Report__r.Name\"/><field id=\"genesis__Party_Name__c\"/><field id=\"Name\"/><field id=\"clcommon__Type__c\"/><field id=\"clcommon__Type__r.Name\"/><field id=\"Party_type_name__c\"/><field id=\"clcommon__isPrimary__c\"/><field id=\"Id\"/><field id=\"clcommon__Signing_on_Behalf_of__c\"/><field id=\"clcommon__Signing_on_Behalf_of__r.Name\"/><field id=\"clcommon__Signer_Capacity__c\"/><field id=\"clcommon__User__c\"/><field id=\"clcommon__User__r.Name\"/><field id=\"clcommon__External_Id__c\"/></fields><conditions><condition type=\"param\" value=\"id\" field=\"genesis__Application__c\" fieldtargetobjects=\"genesis__Applications__c\" operator=\"=\" novaluebehavior=\"deactivate\" mergefield=\"Id\" enclosevalueinquotes=\"true\"/></conditions><actions/></model><model id=\"CustomerAlert\" limit=\"20\" query=\"true\" createrowifnonefound=\"false\" datasource=\"salesforce\" type=\"\" sobject=\"Customer_Alert__c\"><fields><field id=\"Alert_Date__c\"/><field id=\"Customer__c\"/><field id=\"Customer__r.Name\"/><field id=\"Key_data_to_show_customer__c\"/><field id=\"MasterAlert__r.Name\"/><field id=\"Description__c\"/><field id=\"Amount__c\"/><field id=\"MasterAlert__c\"/><field id=\"Name\"/></fields><conditions/><actions/></model></models><components><wrapper uniqueid=\"sk-2gFTCu-499\"><components><grid uniqueid=\"sk-2e93Ok-1920\"><divisions><division behavior=\"flex\" minwidth=\"100px\" ratio=\"1\" verticalalign=\"top\"><components><includepanel type=\"skuid\" uniqueid=\"sk-2g4d0m-722\" pagename=\"AnyLeaseProductApplicationForm\" module=\"ngUi\" querystring=\"?id={{$Model.CommonApplicationModel.data.0.Id}}\"><renderconditions logictype=\"and\"/></includepanel></components></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/></styles><renderconditions logictype=\"and\"/></grid></components><styles><styleitem type=\"background\"/><styleitem type=\"border\"/><styleitem type=\"size\"/></styles><renderconditions logictype=\"and\"><rendercondition type=\"blank\" operator=\"!=\" fieldmodel=\"CommonApplicationModel\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"deactivate\" field=\"genesis__CL_Product__c\" fieldtargetobjects=\"clcommon__CL_Product__c\" value=\"null\" enclosevalueinquotes=\"false\"/><rendercondition type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"true\" fieldmodel=\"ApplicationRecordType\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"skipandnorender\" field=\"DeveloperName\" fieldtargetobjects=\"RecordType\" value=\"Lease\"/></renderconditions></wrapper><pagetitle uniqueid=\"sk-2h7pJc-385\" model=\"OrgParameter\"><actions><action type=\"custom\" label=\"Re-Work\" snippet=\"BackButton\" uniqueid=\"sk-SJh-509\"><renderconditions logictype=\"and\"/><enableconditions logictype=\"and\"><condition type=\"multiple\" operator=\"in\" fieldmodel=\"CommonApplicationModel\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"deactivate\" field=\"genesis__Status__c\" fieldtargetobjects=\"genesis__Applications__c\" value=\"\" enclosevalueinquotes=\"true\"><values><value>TRANSACT</value><value>DOCUMENTS RAISED</value><value>DOCUMENTS RECEIVED</value><value>UNDERWRITING</value><value>PROPOSAL-UNDERWRITER DECLINED</value><value>RECOMMENDED</value><value>APPROVED</value><value>FURTHER INFORMATION REQUIRED</value><value>READY TO CONVERT</value></values></condition></enableconditions><hotkeys/></action><action type=\"custom\" label=\"Submit\" snippet=\"SAF_UpdateApplicationStatus\" uniqueid=\"sk-SJh-512\"><renderconditions logictype=\"and\"><rendercondition type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"true\" fieldmodel=\"OrgParameter\" sourcetype=\"param\" sourceparam=\"mode\" value=\"read\"/></renderconditions><enableconditions logictype=\"and\"><condition type=\"multiple\" operator=\"not in\" fieldmodel=\"CommonApplicationModel\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"deactivate\" field=\"genesis__Status__c\" fieldtargetobjects=\"genesis__Applications__c\" value=\"\" enclosevalueinquotes=\"true\"><values><value>TRANSACT</value><value>DOCUMENTS RAISED</value><value>ACTIVATED</value><value>TRANSFERED</value><value>UNDERWRITING</value><value>DOCUMENTS RECEIVED</value><value>RECOMMENDED</value><value>FURTHER INFORMATION REQUIRED</value><value>LOST</value><value>READY TO CONVERT</value></values></condition></enableconditions><hotkeys/><actions><action type=\"custom\" snippet=\"SAF_UpdateApplicationStatus\"/></actions></action><action type=\"multi\" label=\"Submit\" uniqueid=\"sk-SJh-515\"><actions><action type=\"save\"><models><model>CommonApplicationModel</model></models></action><action type=\"custom\" snippet=\"saveApplication\"/><action type=\"custom\" snippet=\"SAF_UpdateApplicationStatus\"/><action type=\"save\"><models><model>CommonApplicationModel</model></models></action></actions><renderconditions logictype=\"and\"><rendercondition type=\"blank\" operator=\"!=\" fieldmodel=\"CommonApplicationModel\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"skipandnorender\" field=\"Name\" fieldtargetobjects=\"genesis__Applications__c\" value=\"null\" enclosevalueinquotes=\"false\"/><rendercondition type=\"fieldvalue\" operator=\"!=\" enclosevalueinquotes=\"true\" fieldmodel=\"OrgParameter\" sourcetype=\"param\" sourceparam=\"mode\" value=\"read\"/></renderconditions><enableconditions logictype=\"and\"><condition type=\"multiple\" operator=\"not in\" fieldmodel=\"CommonApplicationModel\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"deactivate\" field=\"genesis__Status__c\" fieldtargetobjects=\"genesis__Applications__c\" value=\"\" enclosevalueinquotes=\"true\"><values><value>TRANSACT</value><value>DOCUMENTS RAISED</value><value>ACTIVATED</value><value>TRANSFERED</value><value>UNDERWRITING</value><value>DOCUMENTS RECEIVED</value><value>RECOMMENDED</value><value>FURTHER INFORMATION REQUIRED</value><value>LOST</value><value>READY TO CONVERT</value></values></condition></enableconditions><hotkeys/></action></actions><renderconditions logictype=\"and\"/></pagetitle></components><resources><labels><label id=\"Sharepoint_URL\"/></labels><javascript><jsitem location=\"staticresource\" name=\"CLSNGUIComponent\" cachelocation=\"false\" url=\"\" namespace=\"genesisExtn\" filepath=\"commonUtils.js\">var params = arguments[0],\n              $ = skuid.$;\n            </jsitem><jsitem location=\"staticresource\" name=\"CLSNGUIComponent\" cachelocation=\"false\" url=\"\" namespace=\"genesisExtn\" filepath=\"messageUtils.js\">var params = arguments[0],\n              $ = skuid.$;\n            </jsitem><jsitem location=\"staticresource\" name=\"CLSNGUIComponent\" cachelocation=\"false\" url=\"\" namespace=\"genesisExtn\" filepath=\"clsRemoteActions.js\">var params = arguments[0],\n              $ = skuid.$;\n            </jsitem><jsitem location=\"inline\" name=\"loadCommonModels\" cachelocation=\"false\" url=\"\">(function(skuid){\n  var $ = skuid.$;\n  $('head').append(\n      $('&lt;base target=\"_blank\"&gt;')\n  );\n  \n  $(document.body).one('pageload',function(){\n      var paramId = skuid.page.params.id;\n      var orgParamRow = skuid.model.getModel('OrgParameter').getFirstRow();\n      var applicationModel = skuid.model.getModel('CommonApplicationModel');\n      applicationModel.emptyData();\n      if(paramId){\n            var appIdCondition = applicationModel.getConditionByName('AppId');\n            applicationModel.setCondition(appIdCondition,paramId);\n            skuid.model.updateData([applicationModel],function(){\n                // record type\n                var appRecType = applicationModel.data[0].RecordTypeId;\n                var applicationRTModel = skuid.model.getModel('ApplicationRecordType');\n                var rtIdCondition = applicationRTModel.getConditionByName('Id');\n                applicationRTModel.setCondition(rtIdCondition,appRecType);\n              \n                var productModel = skuid.model.getModel('SelectedProduct');\n                var prodIdCondition = productModel.getConditionByName('Id');\n                productModel.setCondition(prodIdCondition, applicationModel.data[0].genesis__CL_Product__c);\n                skuid.model.updateData([productModel,applicationRTModel],function(){\n                    skuid.snippet.getSnippet('fetchAccountData')();\n                    skuid.snippet.getSnippet('fetchContactData')();\n                });\n            });\n      }else{\n          // fetch record type info\n          var appRecType = skuid.page.params.RecordType;\n            var applicationRTModel = skuid.model.getModel('ApplicationRecordType');\n            var rtIdCondition = applicationRTModel.getConditionByName('Id');\n            applicationRTModel.setCondition(rtIdCondition,appRecType);\n          \n          skuid.model.updateData([applicationRTModel],function(){\n              var newRow = applicationModel.createRow({\n                    additionalConditions: [\n                        { field: 'NewBorrower', value:false },\n                        { field: 'RecordType', value:applicationRTModel.getFirstRow() },\n                        { field: 'RecordTypeId', value:applicationRTModel.getFirstRow().Id },\n                    ]\n                });\n          }); \n      }  \n  });\n})(skuid);\n</jsitem><jsitem location=\"inlinesnippet\" name=\"fieldRenderMode\" cachelocation=\"false\">var field = arguments[0],\n    value = arguments[1];\nvar renderMode = skuid.page.params.mode;\nfieldModeToRender(field,value,renderMode);</jsitem><jsitem location=\"inlinesnippet\" name=\"fetchAccountData\" cachelocation=\"false\">var params = arguments[0],\n  $ = skuid.$;\n  \nvar applicationRowData = skuid.model.getModel('CommonApplicationModel').data[0];\nvar commonAccountModel = skuid.model.getModel('CommonAccountModel');\nvar biModel = skuid.model.getModel('CommonBusinessInforModel');\n\ncommonAccountModel.emptyData();\nbiModel.emptyData();\n\nif(applicationRowData &amp;&amp; applicationRowData.genesis__Account__c){\n    var accountIdCondition = commonAccountModel.getConditionByName('CommonAccId');\n    commonAccountModel.setCondition(accountIdCondition,applicationRowData.genesis__Account__c);\n    skuid.model.updateData([commonAccountModel],function(){\n        if(!(commonAccountModel.data &amp;&amp; commonAccountModel.data.length &gt; 0)){\n            var newPSRow = commonAccountModel.createRow({ });\n        }else{\n            if(commonAccountModel.data[0].genesis__Business_Information__c){\n                // fetch business info\n                var bIdCondition = biModel.getConditionByName('BusinessInfoId');\n                biModel.setCondition(bIdCondition,commonAccountModel.data[0].genesis__Business_Information__c);\n                skuid.model.updateData([biModel],function(){});\n            }else{\n                var newBIRow = biModel.createRow({ });\n            }\n        }\n    });    \n}else{\n    if(!(commonAccountModel.data &amp;&amp; commonAccountModel.data.length &gt; 0)){\n        var newPSRow = commonAccountModel.createRow({ });\n        var newBIRow = biModel.createRow({ });\n    } \n}\n</jsitem><jsitem location=\"inlinesnippet\" name=\"fetchContactData\" cachelocation=\"false\">var params = arguments[0],\n  $ = skuid.$;\n\nvar applicationRowData = skuid.model.getModel('CommonApplicationModel').data[0];\nvar commonContactModel = skuid.model.getModel('CommonContactModel');\ncommonContactModel.emptyData();\nif(applicationRowData &amp;&amp; applicationRowData.Name){\n    if(applicationRowData.genesis__Contact__c){\n        var contactIdCondition = commonContactModel.getConditionByName('CommonContactId');\n        commonContactModel.setCondition(contactIdCondition,applicationRowData.genesis__Contact__c);\n        skuid.model.updateData([commonContactModel],function(){\n            if(!(commonContactModel.data &amp;&amp; commonContactModel.data.length &gt; 0)){\n                var newPSRow = commonContactModel.createRow({ });\n            }\n        });    \n    }\n    \n    if(applicationRowData.genesis__Account__c &amp;&amp; applicationRowData.genesis__Account__r &amp;&amp; \n        applicationRowData.genesis__Account__r.clcommon__Legal_Entity_Type__c &amp;&amp; \n        (applicationRowData.genesis__Account__r.clcommon__Legal_Entity_Type__r.Name.toUpperCase() == 'INDIVIDUAL' ||\n            applicationRowData.genesis__Account__r.clcommon__Legal_Entity_Type__r.Name.toUpperCase() == 'SOLE PROPRIETORSHIP')){\n        var accountIdCondition = commonContactModel.getConditionByName('AccountId');\n        commonContactModel.setCondition(accountIdCondition,applicationRowData.genesis__Account__c);\n        skuid.model.updateData([commonContactModel],function(){\n            if(!(commonContactModel.data &amp;&amp; commonContactModel.data.length &gt; 0)){\n                var newPSRow = commonContactModel.createRow({ });\n            }\n        });\n    }\n}else{\n    if(applicationRowData &amp;&amp; applicationRowData.genesis__Contact__c){\n        var contactIdCondition = commonContactModel.getConditionByName('CommonContactId');\n        commonContactModel.setCondition(contactIdCondition,applicationRowData.genesis__Contact__c);\n        skuid.model.updateData([commonContactModel],function(){\n            if(!(commonContactModel.data &amp;&amp; commonContactModel.data.length &gt; 0)){\n                var newPSRow = commonContactModel.createRow({ });\n            }\n        });    \n    }else{\n        if(!(commonContactModel.data &amp;&amp; commonContactModel.data.length &gt; 0)){\n            var newPSRow = commonContactModel.createRow({ });\n        }\n    }\n}</jsitem><jsitem location=\"inlinesnippet\" name=\"saveApplication\" cachelocation=\"false\">var params = arguments[0],\n  $ = skuid.$;\nvar newAppParams = {};\nvar editorWrapper = $('#AppTitleHeader');\nif(skuid.page.params.id){\n    editorWrapper = $('#AppDetailTitleHeader');\n    \n}\nvar editor = editorWrapper.data('object').editor;\nvar fetchIncludedPageData = skuid.snippet.getSnippet('getIncludedPageData');\nvar result = fetchIncludedPageData();\n\n// Clear the Error messages to avoid error being displayed even after condition is satisfied.\neditor.clearMessages();\n\nif(!result){\n    editor.handleMessages(\n        [\n          {\n              message: 'Unable to save Application data.',\n              severity: 'ERROR'\n          },\n        ]\n    );\n    return;\n}\n\nvar applicationModel = result['genesis__Applications__c'];\nvar appRow = applicationModel.data[0];\nif(skuid.page.params.RecordType){\n    appRow.RecordTypeId = skuid.page.params.RecordType;    \n}\nif(skuid.page.params.parentId){\n    appRow.genesis__Parent_Application__c = skuid.page.params.parentId;    \n}\nvar appModelCommon = skuid.model.getModel('CommonApplicationModel');\nvar appRowCommon = appModelCommon.data[0];\nappRow.genesis__Sales_Division__c=appRowCommon.genesis__Sales_Division__c;\nif(appRow.Team_users!==undefined)\n{\n   appRow.User__c =appRow.Team_users;\n   var user = appRow.Team_users;\n   var result = sforce.connection.query(\"SELECT ID FROM User where name ='\"+user+\"'\");\n   var opp= result.getArray(\"records\"); \n   var UserId = opp[0].Id; \n   appRow.OwnerId=UserId;\n}\n\n\nvar selectedProductModel = skuid.model.getModel('SelectedProduct');\nvar selectedProductRow = selectedProductModel.data[0];\n\n\nif(selectedProductRow.Id &amp;&amp; selectedProductRow.Id.length &gt; 14){\n    appRow.genesis__CL_Product__c = selectedProductRow.Id;\n}\n\nvar newProduct = appRow.genesis__CL_Product__r &amp;&amp; appRow.genesis__CL_Product__r.Id;\nif(appRow.genesis__CL_Product__c != newProduct)\n{\n    \n    var productCheck = confirm(\"Please review all the fee sets\");\n        if (productCheck === true) {\n           // return false;\n        } else {\n            return false;\n        }\n}\n\n//Product Changes\nif(appRow.genesis__CL_Product__r &amp;&amp; appRow.genesis__CL_Product__r.Id)\n         appRow.genesis__CL_Product__c = appRow.genesis__CL_Product__r.Id;\n\n\nvar contactModel = skuid.model.getModel('CommonContactModel');\nvar contactRow = contactModel.data[0];\nvar accountModel = skuid.model.getModel('CommonAccountModel');\nvar accRow = accountModel.data[0];\n//alert(contactRow.clcommon__Legal_Entity_Type__c); // Commented by Deepak M on May 21, 2018, because only from account we get Legal Entity Type not from Contact\nvar PartyModel = skuid.model.getModel('RDParty');\nvar partyRow = PartyModel.data[0];\n\n\nvar businessModel = skuid.model.getModel('CommonBusinessInforModel');\nvar businessRow = businessModel.data[0];\n\nif(!appRow.genesis__Term__c){\n    appRow.genesis__Term__c = 0;\n}\nif(!appRow.genesis__Interest_Rate__c){\n    appRow.genesis__Interest_Rate__c = 0;\n}\nif(!appRow.genesis__Loan_Amount__c){\n    appRow.genesis__Loan_Amount__c = 0;\n}\nif(!appRow.genesis__Credit_Limit__c){\n    appRow.genesis__Credit_Limit__c = 0;\n}\nif(!appRow.genesis__Financed_Amount__c){\n    appRow.genesis__Financed_Amount__c = 0;\n}\nif(!appRow.genesis__Draw_Term__c){\n    appRow.genesis__Draw_Term__c = 0;\n}\n\nnewAppParams.applicationM = applicationModel;\nnewAppParams.pmtstreamM = null;\nnewAppParams.businessM = businessModel;\nif(accRow.Name){\n   //alert(accRow.clcommon__Legal_Entity_Type__c); // Commented by Deepak M on May 22, 2018, not required\n   /* if(accRow.clcommon__Legal_Entity_Type__c === null){\n        editor.handleMessages(\n            [\n              {\n                  message: 'Legal Entity Type is missing:acc',\n                  severity: 'ERROR'\n              },\n            ]\n        );\n        return;\n    }*/\n    newAppParams.accountM = accountModel;\n}else{\n    newAppParams.accountM = null;\n}\n\nif(contactRow &amp;&amp; contactRow.LastName){\n  /*  if(contactRow.clcommon__Legal_Entity_Type__c === null){\n        editor.handleMessages(\n            [\n              {\n                  message: 'Legal Entity Type is missing:con',\n                  severity: 'ERROR'\n              },\n            ]\n        );\n        return;\n    }*/\n    newAppParams.contactM = contactModel;\n}else{\n    newAppParams.contactM = null;\n}\nvar skuidApplicationId = appRow.Id;\nvar result = saveNGApplication(newAppParams);\nvar resultJSON = $.parseJSON(result[0]);\n\n\n\n//Customer should not be blank\nif(!appRow.genesis__Account__c){\n    \n    editor.handleMessages([\n              {\n                  message: 'Customer is blank',\n                  severity: 'ERROR'\n              }]\n        );\n        return;\n}\n\n\n\n// Bug #155305 #Restric Max Length of Proposal Name field\nvar proposalName = appRow.genesis_ProposalName__c;\nvar proposalNameFieldLen = applicationModel.getField('genesis_ProposalName__c').length||255;\nif(proposalName &amp;&amp; proposalName.length&gt;proposalNameFieldLen){\n    \n    editor.handleMessages(\n            [\n              {\n                  message: 'Proposal Name: data value too large (max length='+proposalNameFieldLen+')',\n                  severity: 'ERROR'\n              },\n            ]\n        );\n        return;\n    \n}\n\n// Required fields in UI\nif(!appRow.genesis__Expected_Start_Date__c){\n    \n    editor.handleMessages([\n              {\n                  message: 'Forecast Drawdown Date is blank',\n                  severity: 'ERROR'\n              }]\n        );\n        return;\n}\n\n\n// Bug #155307 #Term should not be blank and error should be specific to it\nif(!appRow.genesis__Term__c){\n    \n    var errMsg = 'Term should not be blank and required positive value';\n    \n    editor.handleMessages([\n              {\n                  message: errMsg,\n                  severity: 'ERROR'\n              }]\n        );\n        return;\n}\n\nif((appRow.genesis_Total_Deposit__c &lt;= 0 || appRow.genesis_Total_Deposit__c === null) &amp;&amp; appRow.genesis__CL_Product__c === 'a4P9E000000CfFbUAK'){\n    \n    var errMsg = 'Please enter Total Deposit';\n    \n    editor.handleMessages([\n              {\n                  message: errMsg,\n                  severity: 'ERROR'\n              }]\n        );\n        return;\n}\n\nif(appRow.genesis__Term__c &amp;&amp; appRow.genesis__Term__c&gt;84){\n    \n     editor.handleMessages([\n              {\n                  message: 'Term value should not be more than 84',\n                  severity: 'ERROR'\n              }]\n        );\n        return;\n    \n}\n\n// Required fields in UI\nif(!appRow.genesis__Expected_First_Payment_Date__c){\n    \n    editor.handleMessages([\n              {\n                  message: 'Expected First Payment Date is blank',\n                  severity: 'ERROR'\n              }]\n        );\n        return;\n}\n\n// Bug #155307 #Net Amount should not be blank and error should be specific to it\nif(!appRow.genesis__Financed_Amount__c){\n   \n    var errMsg = 'Net Amount should not be blank and required positive value';\n    \n    editor.handleMessages([\n              {\n                  message: errMsg,\n                  severity: 'ERROR'\n              }]\n        );\n        return;\n}\n\nconsole.log(applicationModel);\n\nif (resultJSON.status === 'ERROR') {\n    \n    if(resultJSON.errorMessage.indexOf('drawdown date should be greater or equal to the system date')!=-1)\n       resultJSON.errorMessage = 'Drawdown Date should be greater or equal to the system date';\n       \n    else if(resultJSON.errorMessage.indexOf('Expected First Payment Date should be greater than')!=-1)\n       resultJSON.errorMessage = 'Expected First Payment Date should be greater than or equal to the Start Date';\n      \n    editor.handleMessages(\n        [\n          {\n              message: resultJSON.errorMessage,\n              severity: 'ERROR'\n          },\n        ]\n    );\n} else {\n    if(skuidApplicationId == resultJSON.content[0].Id){\n        //closeTopLevelDialogAndRefresh({iframeIds: ['deal-dashboard-iframe,loan-details-iframe','loan-details-iframe','deal-dashboard-iframe,document-iframe']});\n    }else{\n         window.location = '/' + resultJSON.content[0].Id;   \n    }\n}</jsitem><jsitem location=\"inlinesnippet\" name=\"CloseDialog\" cachelocation=\"false\">var params = arguments[0],\n    $ = skuid.$;\n\n//closeTopLevelDialogAndRefresh({iframeIds: ['loan-details-iframe']});\ncloseTopLevelDialogAndRefresh({iframeIds: ['deal-dashboard-iframe,loan-details-iframe','loan-details-iframe']});\n</jsitem><jsitem location=\"inlinesnippet\" name=\"IsReadModeDisabled\" cachelocation=\"false\">var params = arguments[0],\n  $ = skuid.$;\n\nvar readMode = false;\nif(skuid.page.params.mode &amp;&amp; skuid.page.params.mode == 'read'){\n    readMode = true; // changed from true\n}\n\nreturn !readMode;</jsitem><jsitem location=\"inlinesnippet\" name=\"SAF_UpdateApplicationStatus\" cachelocation=\"false\">var appModel = skuid.model.getModel('CommonApplicationModel');\nvar appRow = appModel.data[0];\n\n// Added for Change Request #159440: 27 - Supplier Validation - Starts\n\nvar appRowData = skuid.model.getModel('CommonApplicationModel').data[0];\nvar appId = appRowData.Id;\nvar partyModel = skuid.model.getModel('RDParty');\nvar partyData = [];\npartyData = partyModel.data;\n\nvar i = 0;\nvar canBeSubmitted = false;\n\nfor(i=0;i&lt;partyData.length;i++)\n{\n    if(partyData[i].Party_type_name__c === 'VENDOR' || partyData[i].Party_type_name__c === 'DEALER')\n    {\n        canBeSubmitted = true;\n    }\n}\n\nif(!canBeSubmitted &amp;&amp; appRow.genesis_Unapproved_Supplier__c !== undefined)\n{\n    canBeSubmitted = true;\n}\n\n// Added for Change Request #159440: 27 - Supplier Validation - Ends\n\nif(canBeSubmitted === true) // Added this condition for Change Request #159440: 27 - Supplier Validation\n{\n    var r=confirm(\"Are you sure to submit the application for Approval\");\n    if(r===true)\n    {\n        try \n        {\n            var ret = sforce.apex.execute(\"SAF_ValidateApplication\",\"Validatestatus\",{AppId:appRow.Id});\n            if(ret=='failure'){alert('Please ensure party have been added');}\n        }\n        catch(err) \n        {\n            alert(err);\n        }\n        //window.location.reload();\n        parent.location = '/'+appRow.Id;\n        parent.location.reload();\n        skuid.$('.ui-dialog-content').dialog('close');\n        //parent.location = '/'+appRow.Id;\n        //window.location = '/'+appRow.Id;\n    }\n}\nelse\n{\n    alert('Please ensure there is a Supplier associated to the proposal before submitting to underwriting');\n}\n</jsitem><jsitem location=\"inlinesnippet\" name=\"BackButton\" cachelocation=\"false\">var appModel = skuid.model.getModel('CommonApplicationModel');\nvar appRow = appModel.data[0];\n\n\ntry {\n    //alert(\"Hi\");\n    var ret = sforce.apex.execute(\"SAF_ValidateApplication\",\"moreInformationRequired\",{AppId:appRow.Id});\n}\ncatch(err) {\n    alert(err);\n}\n//window.location.reload();\nparent.location = '/'+appRow.Id;\nparent.location.reload();\n//parent.location = '/'+appRow.Id;\n//window.location = '/'+appRow.Id;\n\n</jsitem><jsitem location=\"inlinesnippet\" name=\"refresh\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\ncloseTopLevelDialogAndRefresh({iframeIds: ['party-iframe']});\n</jsitem><jsitem location=\"inlinesnippet\" name=\"manageParties\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\n\nvar appModelCommon = skuid.model.getModel('CommonApplicationModel');\nvar appRowCommon = appModelCommon.data[0];\n\ntry\n{\nvar partyCheck = sforce.apex.execute(\"genesis_CheckParty\",\"updategenesisParty\",{ApplicationIds:appRowCommon.Id});\n//alert(appRowCommon.Id);\nparent.location = '/'+appRowCommon.Id; \n}\ncatch(err)\n{\n    alert(err);\n}\n</jsitem></javascript><css><cssitem location=\"inline\" name=\"newcss\" cachelocation=\"false\">.sk-wrapper .nx-page {\n    padding: 0 0 0 0;\n}</cssitem><cssitem location=\"inline\" name=\"genesis_titlebold\" cachelocation=\"false\">.ui-dialog .ui-dialog-title{\n        \n    font-weight: Bold;\n}\n\n   </cssitem></css><actionsequences uniqueid=\"sk-rmF-724\"/></resources><styles><styleitem type=\"background\" bgtype=\"color\"><styles><styleitem property=\"background-color\" value=\"#ffffff\"/></styles></styleitem></styles></skuidpage>","skuid__Layout2__c":null,"skuid__Layout3__c":null,"skuid__Layout4__c":null,"skuid__Layout5__c":null}]