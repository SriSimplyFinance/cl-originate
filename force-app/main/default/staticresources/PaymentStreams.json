[{"attributes":{"type":"skuid__Page__c","url":"/services/data/v42.0/sobjects/skuid__Page__c/a8n3Y000000GmtLQAS"},"Id":"a8n3Y000000GmtLQAS","Name":"PaymentStreams__Transact__Final","skuid__API_Version__c":"v1","skuid__Type__c":"Desktop","skuid__UniqueId__c":"ngUi_PaymentStreams__Transact__Final","skuid__Module__c":"ngUi","skuid__Composer_Settings__c":null,"skuid__MasterPage__c":null,"skuid__MasterPage__r":null,"skuid__IsMaster__c":false,"skuid__Layout__c":"<skuidpage personalizationmode=\"server\" showsidebar=\"false\" showheader=\"false\">\n  <models>\n    <model id=\"ApplicationPaymentStreams\" limit=\"\" query=\"true\" createrowifnonefound=\"false\" sobject=\"genesis__Payment_Stream__c\" datasource=\"salesforce\" orderby=\"genesis__Sequence__c ASC\">\n      <fields>\n        <field id=\"genesis__Interest_Rate__c\"/>\n        <field id=\"genesis__Interest_Rate_Adjustment_Frequency__c\"/>\n        <field id=\"genesis__Interest_Rate_Adjustment_Period__c\"/>\n        <field id=\"genesis__Payment_Type__c\"/>\n        <field id=\"genesis__Pricing_Basis__c\"/>\n        <field id=\"genesis__Rate_Type__c\"/>\n        <field id=\"genesis__Application__c\"/>\n        <field id=\"genesis__Application__r.Name\"/>\n        <field id=\"Id\"/>\n        <field id=\"Name\"/>\n      <field id=\"genesis__Number_of_Payments__c\"/><field id=\"genesis__Payment_Amount__c\" overridemetadata=\"true\" ogdisplaytype=\"CURRENCY\" displaytype=\"CURRENCY\" precision=\"\" scale=\"\" defaultvaluetype=\"fieldvalue\"/><field id=\"genesis__Start_Date__c\"/><field id=\"genesis__Payment_Frequency__c\"/><field id=\"genesis__Sequence__c\"/><field id=\"PaymentEndDate__c\"/><field id=\"No_Of_payments__c\"/><field id=\"Updated_Payment_amount__c\"/><field id=\"No_Of_payments_Default__c\"/><field id=\"Sum_of_Payment_Amount__c\"/><field id=\"Total_Payment_amount_transact__c\"/></fields>\n      <conditions>\n        <condition type=\"param\" value=\"id\" field=\"genesis__Application__c\" operator=\"=\" enclosevalueinquotes=\"true\" novaluebehavior=\"noquery\"/>\n      </conditions>\n      <actions/>\n    </model>\n    <model id=\"NewPaymentStreams\" limit=\"\" query=\"false\" createrowifnonefound=\"true\" sobject=\"genesis__Payment_Stream__c\" datasource=\"salesforce\">\n      <fields>\n        <field id=\"Name\"/>\n        <field id=\"genesis__Application__c\"/>\n        <field id=\"genesis__Application__r.Name\"/>\n        <field id=\"genesis__Rate_Type__c\"/>\n        <field id=\"genesis__Pricing_Basis__c\"/>\n        <field id=\"genesis__Interest_Rate_Adjustment_Frequency__c\"/>\n        <field id=\"genesis__Interest_Rate_Adjustment_Period__c\"/>\n      <field id=\"genesis__Number_of_Payments__c\"/></fields>\n      <conditions>\n        <condition type=\"param\" value=\"id\" field=\"genesis__Application__c\" operator=\"=\" enclosevalueinquotes=\"true\" novaluebehavior=\"deactivate\"/>\n      </conditions>\n      <actions/>\n    </model>\n  <model id=\"Application\" limit=\"1\" query=\"true\" createrowifnonefound=\"false\" datasource=\"salesforce\" sobject=\"genesis__Applications__c\"><fields><field id=\"RecordTypeId\"/><field id=\"Total_Rental_Payments__c\"/><field id=\"genesis__CL_Product_Name__c\"/><field id=\"All_Payments_Added__c\"/></fields><conditions><condition type=\"param\" value=\"id\" field=\"Id\" operator=\"=\" mergefield=\"genesis__Application__c\" novaluebehavior=\"deactivate\" fieldtargetobjects=\"genesis__Applications__c\" enclosevalueinquotes=\"true\"/></conditions><actions/></model><model id=\"PayStreamCalc\" limit=\"\" query=\"false\" createrowifnonefound=\"false\" datasource=\"salesforce\" type=\"aggregate\" sobject=\"genesis__Payment_Stream__c\"><fields><field id=\"genesis__Sequence__c\" name=\"countdistinctSequence\" function=\"COUNT_DISTINCT\"/><field id=\"Record_Count__c\" name=\"sumRecordCount\" function=\"SUM\"/></fields><conditions><condition type=\"param\" value=\"id\" field=\"genesis__Application__c\" fieldtargetobjects=\"genesis__Applications__c\" operator=\"=\" enclosevalueinquotes=\"true\"/></conditions><actions/><groupby method=\"rollup\"/></model></models>\n  <components>\n    <pagetitle model=\"NewPaymentStreams\" uniqueid=\"sk-XmHYK-139\" cssclass=\"cls-page-title\">\n      <actions>\n        \n      <action type=\"multi\" uniqueid=\"sk-2dJW-270\" label=\"Add New Payment\"><actions><action type=\"createRow\" model=\"ApplicationPaymentStreams\" appendorprepend=\"append\" defaultmodefornewitems=\"edit\" affectedrows=\"context\"><defaults><default field=\"No_Of_payments__c\" fieldtargetobjects=\"genesis__Payment_Stream__c\" value=\"1\" valuesource=\"fieldvalue\"/><default field=\"genesis__Payment_Frequency__c\" fieldtargetobjects=\"genesis__Payment_Stream__c\" value=\"MONTHLY\" valuesource=\"fieldvalue\"/><default field=\"genesis__Payment_Type__c\" fieldtargetobjects=\"genesis__Payment_Stream__c\" value=\"Rent\" valuesource=\"fieldvalue\"/></defaults></action><action type=\"custom\" snippet=\"newSnippet\"/></actions><renderconditions logictype=\"and\"><rendercondition type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"false\" fieldmodel=\"Application\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"deactivate\" field=\"All_Payments_Added__c\" fieldtargetobjects=\"genesis__Applications__c\" value=\"false\"/></renderconditions><enableconditions/></action><action type=\"multi\" label=\"Save\" uniqueid=\"sk-Upg-465\" icon=\"sk-icon-save\"><actions><action type=\"save\"><models><model>ApplicationPaymentStreams</model></models></action><action type=\"requeryModel\" model=\"Application\" behavior=\"standard\"/><action type=\"datasource-action\" datasource=\"salesforce\" actionname=\"flow\" sfdcactionname=\"Update_Payment_Stream_Dates_CLO\"><inputs><input name=\"varApp\" displaytype=\"string\" value=\"{{$Model.Application.data.0.Id}}\"/></inputs></action><action type=\"requeryModel\" model=\"ApplicationPaymentStreams\" behavior=\"standard\"/><action type=\"updateRow\" fieldmodel=\"Application\" affectedrows=\"context\"><updates><update valuesource=\"modelmerge\" field=\"Total_Rental_Payments__c\" enclosevalueinquotes=\"true\" sourcemodel=\"ApplicationPaymentStreams\" sourcefield=\"Sum_of_Payment_Amount__c\"/></updates></action><action type=\"save\"><models><model>Application</model></models></action></actions><renderconditions logictype=\"and\"><rendercondition type=\"fieldvalue\" enclosevalueinquotes=\"false\" fieldmodel=\"ApplicationPaymentStreams\" sourcetype=\"modelproperty\" nosourcerowbehavior=\"deactivate\" sourceproperty=\"hasChanged\" value=\"true\" operator=\"=\"/><rendercondition type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"false\" fieldmodel=\"Application\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"deactivate\" field=\"All_Payments_Added__c\" fieldtargetobjects=\"genesis__Applications__c\" value=\"false\"/></renderconditions><enableconditions/></action><action type=\"cancel\" label=\"Cancel\" uniqueid=\"sk-Uqm-658\" window=\"self\"><models><model>ApplicationPaymentStreams</model></models><renderconditions logictype=\"and\"><rendercondition type=\"fieldvalue\" enclosevalueinquotes=\"false\" fieldmodel=\"ApplicationPaymentStreams\" sourcetype=\"modelproperty\" sourceproperty=\"hasChanged\" value=\"true\" operator=\"=\"/></renderconditions><enableconditions/></action><action type=\"multi\" label=\"All Payments Added\" uniqueid=\"sk-2dI_-748\" icon=\"sk-icon-import\"><actions><action type=\"blockUI\" model=\"ApplicationPaymentStreams\" behavior=\"standard\" timeout=\"1500\" message=\"Please Wait...\"/><action type=\"updateRow\" fieldmodel=\"Application\" affectedrows=\"context\"><updates><update valuesource=\"fieldvalue\" field=\"All_Payments_Added__c\" enclosevalueinquotes=\"true\" value=\"true\"/></updates></action><action type=\"save\"><models><model>Application</model></models></action></actions><renderconditions logictype=\"and\"><rendercondition type=\"fieldvalue\" enclosevalueinquotes=\"false\" fieldmodel=\"ApplicationPaymentStreams\" sourcetype=\"modelproperty\" nosourcerowbehavior=\"deactivate\" sourceproperty=\"hasChanged\" value=\"false\" operator=\"=\"/><rendercondition type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"false\" fieldmodel=\"Application\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"deactivate\" field=\"All_Payments_Added__c\" fieldtargetobjects=\"genesis__Applications__c\" value=\"false\"/></renderconditions><enableconditions/></action><action type=\"multi\" label=\"Update Payments\" uniqueid=\"sk-1Byx-796\"><actions><action type=\"updateRow\" fieldmodel=\"Application\" affectedrows=\"context\"><updates><update valuesource=\"fieldvalue\" field=\"All_Payments_Added__c\" enclosevalueinquotes=\"true\" value=\"false\"/></updates></action><action type=\"save\"><models><model>Application</model></models></action></actions><renderconditions logictype=\"and\"><rendercondition type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"false\" fieldmodel=\"Application\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"deactivate\" field=\"All_Payments_Added__c\" fieldtargetobjects=\"genesis__Applications__c\" value=\"true\"/></renderconditions><enableconditions logictype=\"and\"/><hotkeys/></action></actions>\n      <maintitle>&lt;div class=\"cls-page-title-header\"&gt;Payment Schedule&lt;/div&gt;</maintitle>\n    </pagetitle>\n    <skootable showconditions=\"true\" showsavecancel=\"false\" showerrorsinline=\"false\" searchmethod=\"server\" searchbox=\"false\" showexportbuttons=\"false\" pagesize=\"all\" createrecords=\"false\" model=\"ApplicationPaymentStreams\" mode=\"read\" uniqueid=\"sk-s81OO-289\" instantfilters=\"false\" emptysearchbehavior=\"query\" sortonclient=\"false\">\n      <fields><field id=\"genesis__Sequence__c\" hideable=\"true\" uniqueid=\"fi-e3x-736\" allowordering=\"true\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions/></field><field id=\"genesis__Number_of_Payments__c\" hideable=\"false\" uniqueid=\"fi-1AVROu-202\" showbydefault=\"true\"><summaries><summary>sum</summary></summaries></field><field id=\"genesis__Payment_Frequency__c\" hideable=\"true\" uniqueid=\"fi-2oAEG5-178\"/><field id=\"genesis__Payment_Amount__c\" hideable=\"true\" uniqueid=\"fi-1AVVhc-222\" snippet=\"\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions logictype=\"and\"/><summaries/></field>\n        \n        \n        \n      <field id=\"genesis__Start_Date__c\" hideable=\"true\" uniqueid=\"fi-mv9-319\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"><rendercondition type=\"fieldvalue\" enclosevalueinquotes=\"false\" fieldmodel=\"ApplicationPaymentStreams\" sourcetype=\"modelproperty\" sourceproperty=\"hasChanged\" value=\"false\" operator=\"=\"/></renderconditions><enableconditions/></field><field id=\"Total_Payment_amount_transact__c\" hideable=\"true\" uniqueid=\"fi-2quo-496\"><label>Total Payment Amount</label><summaries><summary>sum</summary></summaries></field></fields>\n      <rowactions>\n        \n      <action type=\"edit\"/><action type=\"delete\"/></rowactions>\n      <massactions usefirstitemasdefault=\"true\"><action type=\"multi\" label=\"Delete Selected Rows\" icon=\"sk-icon-delete\"><actions><action type=\"markRowsForDeletion\" model=\"ApplicationPaymentStreams\" affectedrows=\"context\"/><action type=\"save\"><models><model>ApplicationPaymentStreams</model></models></action><action type=\"datasource-action\" datasource=\"salesforce\" actionname=\"flow\" sfdcactionname=\"Update_Payment_Stream_Dates_CLO\"><inputs><input name=\"varApp\" displaytype=\"string\" value=\"{{$Model.Application.data.0.Id}}\"/></inputs></action><action type=\"blockUI\" message=\"Please Wait...\" timeout=\"1000\"/><action type=\"requeryModel\" model=\"ApplicationPaymentStreams\" behavior=\"standard\"/></actions></action></massactions>\n      <views>\n        <view type=\"standard\"/>\n      </views>\n      <searchfields/>\n    <renderconditions logictype=\"and\"/><actions defaultlabel=\"Global Actions\" defaulticon=\"sk-icon-magic\" usefirstitemasdefault=\"true\"/></skootable>\n  </components>\n  <resources>\n    <labels/>\n    <javascript>\n      <jsitem location=\"staticresource\" name=\"CLSNGUIComponent\" cachelocation=\"false\" url=\"\" namespace=\"genesisExtn\" filepath=\"messageUtils.js\">var params = arguments[0],\n\t            $ = skuid.$;\n            </jsitem>\n      <jsitem location=\"inlinesnippet\" name=\"LaunchAddEditPaymentStreamDialog\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\n\nvar appId = skuid.page.params.id;\nvar title = 'Add New Payment Schedule ';\nvar index = $('.'+params.row.Id).attr('index');\n\nvar ApplicationPaymentStreamsModel = skuid.model.getModel('ApplicationPaymentStreams');\nvar ifNewRow = ApplicationPaymentStreamsModel.data.length;\n\nif(index === undefined)\n{\n    index = ApplicationPaymentStreamsModel.data.length+1;\n}\n\nskuidPage = 'AddModifyPaymentStreams__Transact';\nvar iframeUrl = '/apex/skuid__ui?page=' + skuidPage + '&amp;appId=' + appId+ '&amp;sequenceNo='+index;\n\nif(params &amp;&amp; params.row &amp;&amp; params.row.Name){\n    title = 'Edit Payment Schedule';\n    iframeUrl = iframeUrl + '&amp;id=' + params.row.Id+ '&amp;sequenceNo='+index;\n}\n\nopenTopLevelDialog({\n    title: title,\n    iframeUrl: iframeUrl\n});</jsitem>\n    <jsitem location=\"inlinesnippet\" name=\"newSnippet\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\n\nvar sequenceNo = skuid.page.params.sequenceNo;\n\nvar paymentSchModel = skuid.model.getModel('ApplicationPaymentStreams');\n//var applicationModel = skuid.model.getModel('application');\n\nvar paymentSchData = [];\npaymentSchData = paymentSchModel.data;\n//applicationDataRow = applicationModel.data[0];\n\nvar i = 0;\nfor(i=0;i&lt;paymentSchData.length;i++)\n{\n    paymentSchModel.updateRow(paymentSchData[i],'genesis__Sequence__c',i+1);\n    // if(i === 0)\n    // {\n    //     applicationModel.updateRow(applicationDataRow,'genesis__Dealer_Payment_Date__c',paymentSchData[i].genesis__Start_Date__c);\n    // }\n}\n\n//skuid.model.save([paymentSchModel]);\n\n//skuid.model.save([applicationModel]);</jsitem><jsitem location=\"inlinesnippet\" cachelocation=\"false\" name=\"sequencevalidation\">var params = arguments[0],\n\t$ = skuid.$,\n    updates = params.updates;\n\nvar payModel = skuid.model.getModel('PayStreamCalc');\nvar payRow = payModel.data[0];\n\nvar count = (payRow.countdistinctSequence);\nvar seq = (payRow.sumRecordCount);\n\nalert(count);\nalert(seq);</jsitem></javascript>\n    <css>\n      <cssitem location=\"staticresource\" name=\"CLSStyleSheetPack\" cachelocation=\"false\" url=\"\" namespace=\"genesisExtn\" filepath=\"cls-common.css\"/>\n      <cssitem location=\"staticresource\" name=\"CLSStyleSheetPack\" cachelocation=\"false\" url=\"\" namespace=\"genesisExtn\" filepath=\"customcss.css\"/>\n    </css>\n  <actionsequences uniqueid=\"sk-Uoz-376\"/></resources>\n  <styles>\n    <styleitem type=\"background\" bgtype=\"none\"/>\n  </styles>\n</skuidpage>","skuid__Layout2__c":null,"skuid__Layout3__c":null,"skuid__Layout4__c":null,"skuid__Layout5__c":null}]